<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>fantasyblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="fantasyblog">
<meta property="og:url" content="https://fantasylhd.github.io/index.html">
<meta property="og:site_name" content="fantasyblog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="fantasy">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="fantasyblog" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/highlight.css">

<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main">
  
    <article id="post-day02-Java" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/04/day02-java/">day02-Java基础语法</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/02/04/day02-java/" class="article-date">
  <time datetime="2020-02-03T17:10:10.000Z" itemprop="datePublished">2020-02-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javaSE/">javaSE</a>
  </div>

    
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>

  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h2 id="1-运算符"><a href="#1-运算符" class="headerlink" title="1. 运算符"></a>1. 运算符</h2><h3 id="1-1-算术运算符（理解）"><a href="#1-1-算术运算符（理解）" class="headerlink" title="1.1 算术运算符（理解）"></a>1.1 算术运算符（理解）</h3><h4 id="1-1-1-运算符和表达式"><a href="#1-1-1-运算符和表达式" class="headerlink" title="1.1.1 运算符和表达式"></a>1.1.1 运算符和表达式</h4>
        
          <p class="article-more-link">
            <a href="/2020/02/04/day02-java/#more">阅读全文</a>
          </p>
        
      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day01-Java" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/04/day01-java/">day01-Java入门</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/02/04/day01-java/" class="article-date">
  <time datetime="2020-02-03T17:01:10.000Z" itemprop="datePublished">2020-02-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javaSE/">javaSE</a>
  </div>

    
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>

  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h2 id="1-Java概述"><a href="#1-Java概述" class="headerlink" title="1. Java概述"></a>1. Java概述</h2><h3 id="1-1-Java语言发展史（了解）"><a href="#1-1-Java语言发展史（了解）" class="headerlink" title="1.1 Java语言发展史（了解）"></a>1.1 Java语言发展史（了解）</h3><p>语言：人与人交流沟通的表达方式<br>计算机语言：人与计算机之间进行信息交流沟通的一种特殊语言</p>
<p>Java语言是美国Sun公司（Stanford University Network）在1995年推出的计算机语言</p>
<p>Java之父：詹姆斯·高斯林（James Gosling）</p>
<p>2009年，Sun公司被甲骨文公司收购，所以我们现在访问oracle官网即可：<a href="https://www.oracle.com/" target="_blank" rel="noopener">https://www.oracle.com</a> </p>
<p>当前，我们课程使用的JDK版本：11.0</p>
<h3 id="1-2-Java语言跨平台原理（理解）"><a href="#1-2-Java语言跨平台原理（理解）" class="headerlink" title="1.2 Java语言跨平台原理（理解）"></a>1.2 Java语言跨平台原理（理解）</h3><p>Java程序并非是直接运行的，Java编译器将Java源程序编译成与平台无关的字节码文件(class文件)，然后由Java虚拟机（JVM）对字节码文件解释执行。所以在不同的操作系统下，只需安装不同的Java虚拟机即可实现java程序的跨平台。</p>
<h3 id="1-3-JRE和JDK（记忆）"><a href="#1-3-JRE和JDK（记忆）" class="headerlink" title="1.3 JRE和JDK（记忆）"></a>1.3 JRE和JDK（记忆）</h3><p>JVM（Java Virtual Machine），Java虚拟机</p>
<p>JRE（Java Runtime Environment），Java运行环境，包含了JVM和Java的核心类库（Java API）</p>
<p>JDK（Java Development Kit）称为Java开发工具，包含了JRE和开发工具</p>
<p>总结：我们只需安装JDK即可，它包含了java的运行环境和虚拟机。</p>
<h3 id="1-4-JDK的下载和安装（应用）"><a href="#1-4-JDK的下载和安装（应用）" class="headerlink" title="1.4 JDK的下载和安装（应用）"></a>1.4 JDK的下载和安装（应用）</h3><h4 id="1-4-1-下载"><a href="#1-4-1-下载" class="headerlink" title="1.4.1 下载"></a>1.4.1 下载</h4><p>通过官方网站获取JDK</p>
<p><a href="http://www.oracle.com/" target="_blank" rel="noopener">http://www.oracle.com</a></p>
<p><strong>注意</strong>：针对不同的操作系统，需要下载对应版本的JDK。</p>
<p>具体下载步骤请参见《JDK下载及安装说明文档》</p>
<h4 id="1-4-2-安装"><a href="#1-4-2-安装" class="headerlink" title="1.4.2 安装"></a>1.4.2 安装</h4><p>傻瓜式安装，下一步即可。但默认的安装路径是在C:\Program Files下，为方便统一管理建议修改安装路径，将与开发相关的软件都安装到一个目录下，例如：E:\develop。</p>
<p><strong>注意</strong>：安装路径不要包含中文或者空格等特殊字符（使用纯英文目录）。</p>
<p>具体安装步骤请参见《JDK下载及安装说明文档》</p>
<h4 id="1-4-3-JDK的安装目录介绍"><a href="#1-4-3-JDK的安装目录介绍" class="headerlink" title="1.4.3 JDK的安装目录介绍"></a>1.4.3 JDK的安装目录介绍</h4><table>
<thead>
<tr>
<th>目录名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>bin</td>
<td>该路径下存放了JDK的各种工具命令。javac和java就放在这个目录。</td>
</tr>
<tr>
<td>conf</td>
<td>该路径下存放了JDK的相关配置文件。</td>
</tr>
<tr>
<td>include</td>
<td>该路径下存放了一些平台特定的头文件。</td>
</tr>
<tr>
<td>jmods</td>
<td>该路径下存放了JDK的各种模块。</td>
</tr>
<tr>
<td>legal</td>
<td>该路径下存放了JDK各模块的授权文档。</td>
</tr>
<tr>
<td>lib</td>
<td>该路径下存放了JDK工具的一些补充JAR包。</td>
</tr>
</tbody></table>
<h2 id="2-第一个演示程序"><a href="#2-第一个演示程序" class="headerlink" title="2. 第一个演示程序"></a>2. 第一个演示程序</h2><h3 id="2-1-常用DOS命令（应用）"><a href="#2-1-常用DOS命令（应用）" class="headerlink" title="2.1 常用DOS命令（应用）"></a>2.1 常用DOS命令（应用）</h3><p>在接触集成开发环境之前，我们需要使用命令行窗口对java程序进行编译和运行，所以需要知道一些常用DOS命令。</p>
<p>1、打开命令行窗口的方式：win + r打开运行窗口，输入cmd，回车。</p>
<p>2、常用命令及其作用</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>盘符名称:</td>
<td>盘符切换。E:回车，表示切换到E盘。</td>
</tr>
<tr>
<td>dir</td>
<td>查看当前路径下的内容。</td>
</tr>
<tr>
<td>cd 目录</td>
<td>进入单级目录。cd itheima</td>
</tr>
<tr>
<td>cd ..</td>
<td>回退到上一级目录。</td>
</tr>
<tr>
<td>cd 目录1\目录2...</td>
<td>进入多级目录。cd itheima\JavaSE</td>
</tr>
<tr>
<td>cd \</td>
<td>回退到盘符目录。</td>
</tr>
<tr>
<td>cls</td>
<td>清屏。</td>
</tr>
<tr>
<td>exit</td>
<td>退出命令提示符窗口。</td>
</tr>
</tbody></table>
<h3 id="2-2-Path环境变量的配置（应用）"><a href="#2-2-Path环境变量的配置（应用）" class="headerlink" title="2.2 Path环境变量的配置（应用）"></a>2.2 Path环境变量的配置（应用）</h3><h4 id="2-2-1-为什么配置环境变量"><a href="#2-2-1-为什么配置环境变量" class="headerlink" title="2.2.1 为什么配置环境变量"></a>2.2.1 为什么配置环境变量</h4><p>开发Java程序，需要使用JDK提供的开发工具（比如javac.exe、java.exe等命令），而这些工具在JDK的安装目录的bin目录下，如果不配置环境变量，那么这些命令只可以在该目录下执行。我们不可能把所有的java文件都放到JDK的bin目录下，所以配置环境变量的作用就是可以使bin目录下的java相关命令可以在任意目录下使用。</p>
<h4 id="2-2-2-配置环境变量步骤"><a href="#2-2-2-配置环境变量步骤" class="headerlink" title="2.2.2 配置环境变量步骤"></a>2.2.2 配置环境变量步骤</h4><p>具体配置步骤请参见《Java环境变量配置说明》文档。    </p>
<h3 id="2-3-HelloWorld案例（应用）"><a href="#2-3-HelloWorld案例（应用）" class="headerlink" title="2.3 HelloWorld案例（应用）"></a>2.3 HelloWorld案例（应用）</h3><p>HelloWorld案例是指在计算机屏幕上输出“HelloWorld”这行文字。各种计算机语言都习惯使用该案例作为第一个演示案例。</p>
<h4 id="2-3-1-Java程序开发运行流程"><a href="#2-3-1-Java程序开发运行流程" class="headerlink" title="2.3.1 Java程序开发运行流程"></a>2.3.1 Java程序开发运行流程</h4><p>开发Java程序，需要三个步骤：编写程序，编译程序，运行程序。</p>
<h4 id="2-3-2-HelloWorld案例的编写"><a href="#2-3-2-HelloWorld案例的编写" class="headerlink" title="2.3.2 HelloWorld案例的编写"></a>2.3.2 HelloWorld案例的编写</h4><p>1、新建文本文档文件，修改名称为HelloWorld.java。</p>
<p>2、用记事本打开HelloWorld.java文件，输写程序内容。</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HelloWorld"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="2-3-3-HelloWorld案例的编译和运行"><a href="#2-3-3-HelloWorld案例的编译和运行" class="headerlink" title="2.3.3 HelloWorld案例的编译和运行"></a>2.3.3 HelloWorld案例的编译和运行</h4><p>存文件，打开命令行窗口，将目录切换至java文件所在目录，编译java文件生成class文件，运行class文件。</p>
<blockquote>
<p>编译：javac 文件名.java</p>
<p>范例：javac HelloWorld.java</p>
<p>执行：java 类名</p>
<p>范例：java HelloWorld</p>
</blockquote>
<h3 id="2-4-HelloWorld案例常见问题（理解）"><a href="#2-4-HelloWorld案例常见问题（理解）" class="headerlink" title="2.4 HelloWorld案例常见问题（理解）"></a>2.4 HelloWorld案例常见问题（理解）</h3><h4 id="2-4-1-BUG"><a href="#2-4-1-BUG" class="headerlink" title="2.4.1 BUG"></a>2.4.1 BUG</h4><p>在电脑系统或程序中，隐藏着的一些未被发现的缺陷或问题统称为bug（漏洞）。</p>
<h4 id="2-4-2-BUG的解决"><a href="#2-4-2-BUG的解决" class="headerlink" title="2.4.2 BUG的解决"></a>2.4.2 BUG的解决</h4><p>1、具备识别BUG的能力：多看</p>
<p>2、具备分析BUG的能力：多思考，多查资料</p>
<p>3、具备解决BUG的能力：多尝试，多总结</p>
<h4 id="2-4-3-HelloWorld案例常见问题"><a href="#2-4-3-HelloWorld案例常见问题" class="headerlink" title="2.4.3 HelloWorld案例常见问题"></a>2.4.3 HelloWorld案例常见问题</h4><p>1、非法字符问题。Java中的符号都是英文格式的。</p>
<p>2、大小写问题。Java语言对大小写敏感（区分大小写）。</p>
<p>3、在系统中显示文件的扩展名，避免出现HelloWorld.java.txt文件。</p>
<p>4、编译命令后的java文件名需要带文件后缀.java</p>
<p>5、运行命令后的class文件名（类名）不带文件后缀.class</p>
<p>…</p>
<h3 id="2-5-Notepad-软件的安装和使用（应用）"><a href="#2-5-Notepad-软件的安装和使用（应用）" class="headerlink" title="2.5 Notepad++软件的安装和使用（应用）"></a>2.5 Notepad++软件的安装和使用（应用）</h3><h4 id="2-5-1-什么要使用Notepad-软件"><a href="#2-5-1-什么要使用Notepad-软件" class="headerlink" title="2.5.1 什么要使用Notepad++软件"></a>2.5.1 什么要使用Notepad++软件</h4><p>Notepad++功能比windows中的自带记事本功能强大，除了可以用来制作一般的纯文字说明文件，也十分适合编写计算机程序代码。Notepad++有行号，能够快速定位问题位置，还有语法高亮度显示、代码折叠等功能。而且它是免费的。</p>
<h4 id="2-5-2-Notepad-软件安装"><a href="#2-5-2-Notepad-软件安装" class="headerlink" title="2.5.2 Notepad++软件安装"></a>2.5.2 Notepad++软件安装</h4><p>安装：傻瓜式安装，一直下一步即可。建议也安装到统一的开发软件目录下，比如E:\develop。</p>
<p>具体安装步骤请参见《Nodepad++软件安装及配置说明》文档。</p>
<h4 id="2-5-3Notepad-软件配置"><a href="#2-5-3Notepad-软件配置" class="headerlink" title="2.5.3Notepad++软件配置"></a>2.5.3Notepad++软件配置</h4><p>安装完毕之后，为了使用方便，做一个简单的配置：修改默认语言和编码。</p>
<p>具体配置的说明请参见《Nodepad++软件安装及配置说明》文档。</p>
<h2 id="3-java基础语法"><a href="#3-java基础语法" class="headerlink" title="3. java基础语法"></a>3. java基础语法</h2><h4 id="3-1-注释（理解）"><a href="#3-1-注释（理解）" class="headerlink" title="3.1 注释（理解）"></a>3.1 注释（理解）</h4><p>注释是对代码的解释和说明文字，可以提高程序的可读性，因此在程序中添加必要的注释文字十分重要。Java中的注释分为三种：</p>
<p>单行注释。单行注释的格式是使用//，从//开始至本行结尾的文字将作为注释文字。</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 这是单行注释文字</span></code></pre>
<p>多行注释。多行注释的格式是使用/* 和 */将一段较长的注释括起来。</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*
这是多行注释文字
这是多行注释文字
这是多行注释文字
*/</span>
注意：多行注释不能嵌套使用。</code></pre>
<p>文档注释。文档注释以<code>/**</code>开始，以<code>*/</code>结束。（以后讲）</p>
<h4 id="3-2-关键字（理解）"><a href="#3-2-关键字（理解）" class="headerlink" title="3.2 关键字（理解）"></a>3.2 关键字（理解）</h4><p>关键字是指被java语言赋予了特殊含义的单词。</p>
<p>关键字的特点：</p>
<p>​    关键字的字母全部小写。</p>
<p>​    常用的代码编辑器对关键字都有高亮显示，比如现在我们能看到的public、class、static等。</p>
<h4 id="3-3-常量（应用）"><a href="#3-3-常量（应用）" class="headerlink" title="3.3 常量（应用）"></a>3.3 常量（应用）</h4><p>常量：在程序运行过程中，其值不可以发生改变的量。</p>
<p>Java中的常量分类：</p>
<p>​    字符串常量  用双引号括起来的多个字符（可以包含0个、一个或多个），例如”a”、”abc”、”中国”等</p>
<p>​    整数常量  整数，例如：-10、0、88等</p>
<p>​    小数常量  小数，例如：-5.5、1.0、88.88等</p>
<p>​    字符常量  用单引号括起来的一个字符，例如：’a’、’5’、’B’、’中’等</p>
<p>​    布尔常量  布尔值，表示真假，只有两个值true和false</p>
<p>​    空常量  一个特殊的值，空值，值为null</p>
<p>除空常量外，其他常量均可使用输出语句直接输出。</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出一个整数</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">5.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出一个小数</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出一个字符</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出boolean值true</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"欢迎来到黑马程序员"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出字符串</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="3-4-数据类型（记忆、应用）"><a href="#3-4-数据类型（记忆、应用）" class="headerlink" title="3.4 数据类型（记忆、应用）"></a>3.4 数据类型（记忆、应用）</h4><h5 id="3-4-1-计算机存储单元"><a href="#3-4-1-计算机存储单元" class="headerlink" title="3.4.1 计算机存储单元"></a>3.4.1 计算机存储单元</h5><p>我们知道计算机是可以用来存储数据的，但是无论是内存还是硬盘，计算机存储设备的最小信息单元叫“位（bit）”，我们又称之为“比特位”，通常用小写的字母”b”表示。而计算机中最基本的存储单元叫“字节（byte）”，</p>
<p>通常用大写字母”B”表示，字节是由连续的8个位组成。</p>
<p>除了字节外还有一些常用的存储单位，其换算单位如下：</p>
<p>1B（字节） = 8bit</p>
<p>1KB = 1024B</p>
<p>1MB = 1024KB</p>
<p>1GB = 1024MB</p>
<p>1TB = 1024GB</p>
<h5 id="3-4-2-Java中的数据类型"><a href="#3-4-2-Java中的数据类型" class="headerlink" title="3.4.2 Java中的数据类型"></a>3.4.2 Java中的数据类型</h5><p>Java是一个强类型语言，Java中的数据必须明确数据类型。在Java中的数据类型包括基本数据类型和引用数据类型两种。</p>
<p>Java中的基本数据类型：</p>
<table>
<thead>
<tr>
<th align="left">数据类型</th>
<th>关键字</th>
<th>内存占用</th>
<th align="left">取值范围</th>
</tr>
</thead>
<tbody><tr>
<td align="left">整数类型</td>
<td>byte</td>
<td>1</td>
<td align="left">-128~127</td>
</tr>
<tr>
<td align="left"></td>
<td>short</td>
<td>2</td>
<td align="left">-32768~32767</td>
</tr>
<tr>
<td align="left"></td>
<td>int(默认)</td>
<td>4</td>
<td align="left">-2的31次方到2的31次方-1</td>
</tr>
<tr>
<td align="left"></td>
<td>long</td>
<td>8</td>
<td align="left">-2的63次方到2的63次方-1</td>
</tr>
<tr>
<td align="left">浮点类型</td>
<td>float</td>
<td>4</td>
<td align="left">负数：-3.402823E+38到-1.401298E-45                                                             正数：   1.401298E-45到3.402823E+38</td>
</tr>
<tr>
<td align="left"></td>
<td>double(默认)</td>
<td>8</td>
<td align="left">负数：-1.797693E+308到-4.9000000E-324                                              正数：4.9000000E-324   到1.797693E+308</td>
</tr>
<tr>
<td align="left">字符类型</td>
<td>char</td>
<td>2</td>
<td align="left">0-65535</td>
</tr>
<tr>
<td align="left">布尔类型</td>
<td>boolean</td>
<td>1</td>
<td align="left">true，false</td>
</tr>
</tbody></table>
<p>说明：</p>
<p>​    e+38表示是乘以10的38次方，同样，e-45表示乘以10的负45次方。</p>
<p>​    在java中整数默认是int类型，浮点数默认是double类型。</p>
<h4 id="3-5-变量（应用）"><a href="#3-5-变量（应用）" class="headerlink" title="3.5 变量（应用）"></a>3.5 变量（应用）</h4><h5 id="3-5-1-变量的定义"><a href="#3-5-1-变量的定义" class="headerlink" title="3.5.1 变量的定义"></a>3.5.1 变量的定义</h5><p>变量：在程序运行过程中，其值可以发生改变的量。</p>
<p>从本质上讲，变量是内存中的一小块区域，其值可以在一定范围内变化。</p>
<p>变量的定义格式：</p>
<pre class=" language-java"><code class="language-java">数据类型 变量名 <span class="token operator">=</span> 初始化值<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 声明变量并赋值</span>
<span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>或者</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 先声明，后赋值（使用前赋值即可）</span>
数据类型 变量名<span class="token punctuation">;</span>
变量名 <span class="token operator">=</span> 初始化值<span class="token punctuation">;</span>
<span class="token keyword">double</span> money<span class="token punctuation">;</span>
money <span class="token operator">=</span> <span class="token number">55.5</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>还可以在同一行定义多个同一种数据类型的变量，中间使用逗号隔开。但不建议使用这种方式，降低程序的可读性。</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 定义int类型的变量a和b，中间使用逗号隔开</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> c<span class="token punctuation">,</span>d<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 声明int类型的变量c和d，中间使用逗号隔开</span>
c <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
d <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>变量的使用：通过变量名访问即可。</p>
<h5 id="3-5-2-使用变量时的注意事项"><a href="#3-5-2-使用变量时的注意事项" class="headerlink" title="3.5.2 使用变量时的注意事项"></a>3.5.2 使用变量时的注意事项</h5><ol>
<li>在同一对花括号中，变量名不能重复。</li>
<li>变量在使用之前，必须初始化（赋值）。</li>
<li>定义long类型的变量时，需要在整数的后面加L（大小写均可，建议大写）。因为整数默认是int类型，整数太大可能超出int范围。</li>
<li>定义float类型的变量时，需要在小数的后面加F（大小写均可，建议大写）。因为浮点数的默认类型是double， double的取值范围是大于float的，类型不兼容。</li>
</ol>
<h4 id="3-6-标识符（记忆、理解）"><a href="#3-6-标识符（记忆、理解）" class="headerlink" title="3.6 标识符（记忆、理解）"></a>3.6 标识符（记忆、理解）</h4><p>标识符是用户编程时使用的名字，用于给类、方法、变量、常量等命名。</p>
<p>Java中标识符的组成规则：</p>
<p>​    由字母、数字、下划线“_”、美元符号“$”组成，第一个字符不能是数字。</p>
<p>​    不能使用java中的关键字作为标识符。    </p>
<p>​    标识符对大小写敏感（区分大小写）。</p>
<p>Java中标识符的命名约定：</p>
<p>​    小驼峰式命名：变量名、方法名</p>
<p>​        首字母小写，从第二个单词开始每个单词的首字母大写。</p>
<p>​    大驼峰式命名：类名</p>
<p>​        每个单词的首字母都大写。</p>
<p>​    另外，标识符的命名最好可以做到见名知意</p>
<p>​        例如：username、studentNumber等。</p>
<h4 id="3-7-类型转换（理解）"><a href="#3-7-类型转换（理解）" class="headerlink" title="3.7 类型转换（理解）"></a>3.7 类型转换（理解）</h4><p>在Java中，一些数据类型之间是可以相互转换的。分为两种情况：自动类型转换和强制类型转换。</p>
<p>自动类型转换：</p>
<p>​    把一个表示数据范围小的数值或者变量赋值给另一个表示数据范围大的变量。这种转换方式是自动的，直接书写即可。例如：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">double</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将int类型的10直接赋值给double类型</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出10.0</span></code></pre>
<p>强制类型转换：</p>
<p>​    把一个表示数据范围大的数值或者变量赋值给另一个表示数据范围小的变量。</p>
<p>​    强制类型转换格式：目标数据类型 变量名 = (目标数据类型)值或者变量;</p>
<p>​    例如：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">double</span> num1 <span class="token operator">=</span> <span class="token number">5.5</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> num2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> num1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将double类型的num1强制转换为int类型</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输出5（小数位直接舍弃）</span></code></pre>
<p><img src="/2020/02/04/day01-java/p1.png" alt="图1"></p>
<p>说明：</p>
<ol>
<li>char类型的数据转换为int类型是按照码表中对应的int值进行计算的。比如在ASCII码表中，’a’对应97。</li>
</ol>
<pre class=" language-java"><code class="language-java"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 将输出97</span></code></pre>
<ol start="2">
<li>整数默认是int类型，byte、short和char类型数据参与运算均会自动转换为int类型。</li>
</ol>
<pre class=" language-java"><code class="language-java"><span class="token keyword">byte</span> b1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span> b2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span> b3 <span class="token operator">=</span> b1 <span class="token operator">+</span> b2<span class="token punctuation">;</span> 
<span class="token comment" spellcheck="true">// 第三行代码会报错，b1和b2会自动转换为int类型，计算结果为int，int赋值给byte需要强制类型转换。</span>
<span class="token comment" spellcheck="true">// 修改为:</span>
<span class="token keyword">int</span> num <span class="token operator">=</span> b1 <span class="token operator">+</span> b2<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 或者：</span>
<span class="token keyword">byte</span> b3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>b1 <span class="token operator">+</span> b2<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ol>
<li>boolean类型不能与其他基本数据类型相互转换。</li>
</ol>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day47-maven" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day47-maven/">day46_maven</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day47-maven/" class="article-date">
  <time datetime="2020-04-12T09:42:50.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        
      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-工厂模式" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/gong-han-mo-shi/">day46_maven</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/gong-han-mo-shi/" class="article-date">
  <time datetime="2020-04-12T09:42:50.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        
      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day46-redis" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day46-redis/">day46_redis</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day46-redis/" class="article-date">
  <time datetime="2020-04-12T09:42:28.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day46-redis"><a href="#day46-redis" class="headerlink" title="day46_redis"></a>day46_redis</h1><h2 id="1-1-什么是NOSQL"><a href="#1-1-什么是NOSQL" class="headerlink" title="1.1 什么是NOSQL"></a>1.1 什么是NOSQL</h2><h3 id="1-1-1-什么是NOSQL"><a href="#1-1-1-什么是NOSQL" class="headerlink" title="1.1.1 什么是NOSQL"></a>1.1.1 什么是NOSQL</h3><p>NoSQL(NoSQL = Not Only SQL)，意即“不仅仅是SQL”，是一项全新的数据库理念，泛指非关系型的数据库。</p>
<h3 id="1-1-2-为什么需要NOSQL"><a href="#1-1-2-为什么需要NOSQL" class="headerlink" title="1.1.2 为什么需要NOSQL"></a>1.1.2 为什么需要NOSQL</h3><p>随着互联网的高速崛起，网站的用户群的增加，访问量的上升，传统数据库上都开始出现了性能瓶颈，web程序不再仅仅专注在功能上，同时也在追求性能。所以NOSQL数据库应运而上，具体表现为对如下三高问题的解决：</p>
<ol>
<li>High performance - 对数据库高并发读写的需求</li>
<li>Huge Storage - 对海量数据的高效率存储和访问的需求</li>
<li>High Scalability &amp;&amp; High Availability- 对数据库的高可扩展性和高可用性的需求</li>
</ol>
<h3 id="1-1-3-主流的NOSQL产品"><a href="#1-1-3-主流的NOSQL产品" class="headerlink" title="1.1.3 主流的NOSQL产品"></a>1.1.3 主流的NOSQL产品</h3><p><img src="/2020/04/12/day46-redis/1.png" alt></p>
<h3 id="1-1-4-NOSQL的特点"><a href="#1-1-4-NOSQL的特点" class="headerlink" title="1.1.4 NOSQL的特点"></a>1.1.4 NOSQL的特点</h3><p>在大数据存取上具备关系型数据库无法比拟的性能优势，例如：</p>
<ul>
<li>易扩展</li>
</ul>
<p>NoSQL数据库种类繁多，但是一个共同的特点都是去掉关系数据库的关系型特性。数据之间无关系，这样就非常容易扩展。也无形之间，在架构的层面上带来了可扩展的能力。</p>
<ul>
<li>大数据量，高性能</li>
</ul>
<p>NoSQL数据库都具有非常高的读写性能，尤其在大数据量下，同样表现优秀。这得益于它的无关系性，数据库的结构简单。</p>
<ul>
<li>灵活的数据模型</li>
</ul>
<p>NoSQL无需事先为要存储的数据建立字段，随时可以存储自定义的数据格式。而在关系数据库里，增删字段是一件非常麻烦的事情。如果是非常大数据量的表，增加字段简直就是一个噩梦。这点在大数据量的Web2.0时代尤其明显。</p>
<ul>
<li>高可用</li>
</ul>
<p>NoSQL在不太影响性能的情况，就可以方便的实现高可用的架构。比如Cassandra，HBase模型，通过复制模型也能实现高可用。</p>
<h2 id="1-2-Redis"><a href="#1-2-Redis" class="headerlink" title="1.2  Redis"></a>1.2  Redis</h2><h3 id="1-2-1-什么是Redis"><a href="#1-2-1-什么是Redis" class="headerlink" title="1.2.1 什么是Redis"></a>1.2.1 什么是Redis</h3><p>Redis是用C语言开发的一个开源的高性能键值对（key-value）数据库，官方提供测试数据，50个并发执行100000个请求,读的速度是110000次/s,写的速度是81000次/s ，且Redis通过提供多种键值数据类型来适应不同场景下的存储需求。</p>
<h3 id="1-2-2-redis的应用场景"><a href="#1-2-2-redis的应用场景" class="headerlink" title="1.2.2 redis的应用场景"></a>1.2.2 redis的应用场景</h3><ol>
<li>缓存（数据查询、短连接、新闻内容、商品内容等等）</li>
<li>聊天室的在线好友列表</li>
<li>任务队列。（秒杀、抢购、12306等等）</li>
<li>应用排行榜</li>
<li>网站访问统计</li>
<li>数据过期处理（可以精确到毫秒</li>
<li>分布式集群架构中的session分离</li>
</ol>
<h3 id="1-2-3-Redis的数据类型"><a href="#1-2-3-Redis的数据类型" class="headerlink" title="1.2.3 Redis的数据类型"></a>1.2.3 Redis的数据类型</h3><p>redis是一种高级的key-value的存储系统，其中value支持五种数据类型：</p>
<ol>
<li>字符串（String）</li>
<li>哈希（hash）</li>
<li>字符串列表（list）</li>
<li>字符串集合（set）</li>
<li>有序字符串集合（sorted set）</li>
</ol>
<p>关于key的定义，注意如下几点：</p>
<p>key不要太长，最好不要操作1024个字节，这不仅会消耗内存还会降低查找效率，key不要太短，如果太短会降低key的可读性，在项目中，key最好有一个统一的命名规范。</p>
<h4 id="字符串类型string"><a href="#字符串类型string" class="headerlink" title="字符串类型string"></a>字符串类型string</h4><p>字符串类型是Redis中最为基础的数据存储类型，它在Redis中是二进制安全的，这便意味着该类型存入和获取的数据相同。在Redis中字符串类型的Value最多可以容纳的数据长度是512M。</p>
<p>字符串类型string常用命令</p>
<p>set key value</p>
<ul>
<li>设定key持有指定的字符串value，如果该key存在则进行覆盖操作。总是返回”OK”</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">></span> set company <span class="token string">"itcast"</span>
OK
<span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">></span></code></pre>
<p>get key</p>
<ul>
<li>获取key的value。如果与该key关联的value不是String类型，redis将返回错误信息，因为get命令只能用于获取String value；如果该key不存在，返回(nil)。</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">></span> set name <span class="token string">"itcast"</span>
OK
<span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">></span> get name
<span class="token string">"itcast"</span></code></pre>
<p>del key</p>
<ul>
<li>删除指定key<br>```java</li>
</ul>
<p>127.0.0.1:6379&gt; del name<br>(integer) 1<br>127.0.0.1:6379&gt; get name<br>(nil)</p>
<p>如果使用可以转换成整数的值，则可以使用下列的命令来实现数值操作</p>
<p>incr命令 自增<br>decr命令 自减<br>incrby key step 自增步数<br>decrby key step 自减步数</p>
<pre><code>
#### 哈希类型hash

Redis中的Hash类型可以看成具有String Key和String Value的map容器。所以该类型非常适合于存储值对象的信息。如Username、Password和Age等。如果Hash中包含很少的字段，那么该类型的数据也将仅占用很少的磁盘空间。每一个Hash可以存储4294967295个键值对。

哈希类型hash常用命令

hset key field value
* 为指定的key设定field/value对（键值对）。

```java
127.0.0.1:6379&gt; hset myhash username haohao
(integer) 1
127.0.0.1:6379&gt;</code></pre><p>hget key field</p>
<ul>
<li>返回指定的key中的field的值<br>```java</li>
</ul>
<p>127.0.0.1:6379&gt; hset myhash username haohao<br>(integer) 1<br>127.0.0.1:6379&gt; hget myhash username<br>“haohao”</p>
<pre><code>
hgetall key
* 可以获取该键的所有数据
```java
127.0.0.1:6379&gt; hgetall myhash
1) &quot;username&quot;
2) &quot;tom&quot;
3) &quot;password&quot;
4) &quot;123&quot;
127.0.0.1:6379&gt;</code></pre><h4 id="列表类型list"><a href="#列表类型list" class="headerlink" title="列表类型list"></a>列表类型list</h4><p>在Redis中，List类型是按照插入顺序排序的字符串链表。和数据结构中的普通链表一样，我们可以在其头部(left)和尾部(right)添加新的元素。在插入时，如果该键并不存在，Redis将为该键创建一个新的链表。与此相反，如果链表中所有的元素均被移除，那么该键也将会被从数据库中删除。List中可以包含的最大元素数量是4294967295</p>
<p>列表类型list常用命令</p>
<p>lpush key values value1 value2….</p>
<ul>
<li>在指定的key所关联的list的头部插入所有的values，如果该key不存在，该命令在插入的之前创建一个与该key关联的空链表，之后再向该链表的头部插入数据。插入成功，返回元素的个数。</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">></span> lpush mylist a b <span class="token function">c</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token operator">:</span><span class="token number">6379</span><span class="token operator">></span></code></pre>
<p>lpop key</p>
<ul>
<li>返回并弹出指定的key关联的链表中的第一个元素，即头部元素。如果该key不存在，返回nil；若key存在，则返回链表的头部元素<br>```java</li>
</ul>
<p>127.0.0.1:6379&gt; lpush mylist a b c<br>(integer) 3<br>127.0.0.1:6379&gt; lpop mylist<br>“c”<br>127.0.0.1:6379&gt; lpop mylist<br>“b”</p>
<pre><code>
rpop key
* 从尾部弹出元素。
```java
127.0.0.1:6379&gt; lpush mylist a b c
(integer) 3
127.0.0.1:6379&gt; rpop mylist
&quot;a&quot;</code></pre><p>lrange key 索引 索引</p>
<ul>
<li>遍历该键的所有数据<br>```java</li>
</ul>
<p>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br>1) “d”<br>2) “c”<br>3) “b”<br>4) “a”<br>5) “1”<br>6) “2”<br>7) “3”<br>8) “4”</p>
<pre><code>
#### 集合类型set

在Redis中，我们可以将Set类型看作为没有排序的字符集合，和List类型一样，我们也可以在该类型的数据值上执行添加、删除或判断某一元素是否存在等操作。需要说明的是，这些操作的时间复杂度为O(1)，即常量时间内完成次操作。Set可包含的最大元素数量是4294967295，和List类型不同的是，Set集合中不允许出现重复的元素。

集合类型set的常用命令

sadd key values value1、value2…
* 向set中添加数据，如果该key的值已有则不会重复添加
```java
127.0.0.1:6379&gt; sadd myset a b c
(integer) 3</code></pre><p>smembers key</p>
<ul>
<li>获取set中所有的成员<br>```java</li>
</ul>
<p>127.0.0.1:6379&gt; sadd myset a b c<br>(integer) 3<br>127.0.0.1:6379&gt; smembers myset<br>1) “c”<br>2) “a”<br>3) “b”</p>
<pre><code>
#### 有序集合类型sortset

在redis中,可以保证不重复的元素,仍然可以进行排序

有序集合类型sortset常用命令

zadd key values value1、value2…
* 向set中添加成员
```java
127.0.0.1:6379&gt; zadd 5 lisi 10 xiaoming 7 xiaohua 8 xiaogou</code></pre><p>zrem key value</p>
<ul>
<li>移除set中的成员<pre class=" language-java"><code class="language-java">ZREM myset lisi</code></pre>
</li>
</ul>
<p>zrange key 索引 索引</p>
<ul>
<li>通过索引区间返回有序集合成指定区间内的成员<br>```java</li>
</ul>
<p>127.0.0.1:6379&gt; zrange myset 0 -1<br>1) “lisi”<br>2) “xiaohua”<br>3) “xiaogou”<br>4) “xiaoming”</p>
<pre><code>
#### Redis的通用命令

keys pattern
* 获取所有与pattern匹配的key，返回所有与该key匹配的keys。*表示任意一个或多个字符，?表示任意一个字符

del key1 key2…
* 删除指定的key

exists key
* 判断该key是否存在，1代表存在，0代表不存在

type key
* 获取指定key的类型。该命令将以字符串的格式返回。 返回的字符串为string、list、set、hash，如果key不存在返回none

### 1.2.4 Redis的持久化

#### Redis持久化概述

Redis的高性能是由于其将所有数据都存储在了内存中，为了使Redis在重启之后仍能保证数据不丢失，需要将数据从内存中同步到硬盘中，这一过程就是持久化。Redis支持两种方式的持久化，一种是RDB方式，一种是AOF方式。可以单独使用其中一种或将二者结合使用。

* RDB持久化（默认支持，无需配置）
该机制是指在指定的时间间隔内将内存中的数据集快照写入磁盘。

* AOF持久化
该机制将以日志的形式记录服务器所处理的每一个写操作，在Redis服务器启动之初会读取该文件来重新构建数据库，以保证启动后数据库中的数据是完整的。

* 无持久化
我们可以通过配置的方式禁用Redis服务器的持久化功能，这样我们就可以将Redis视为一个功能加强版的memcached了。

* redis可以同时使用RDB和AOF

#### RDB持久化机制

RDB持久化机制优点:

* 一旦采用该方式，那么你的整个Redis数据库将只包含一个文件，这对于文件备份而言是非常完美的。比如，你可能打算每个小时归档一次最近24小时的数据，同时还要每天归档一次最近30天的数据。通过这样的备份策略，一旦系统出现灾难性故障，我们可以非常容易的进行恢复。

* 对于灾难恢复而言，RDB是非常不错的选择。因为我们可以非常轻松的将一个单独的文件压缩后再转移到其它存储介质上

* 性能最大化。对于Redis的服务进程而言，在开始持久化时，它唯一需要做的只是fork（分叉）出子进程，之后再由子进程完成这些持久化的工作，这样就可以极大的避免服务进程执行IO操作了。

相比于AOF机制，如果数据集很大，RDB的启动效率会更高

 RDB持久化机制缺点:

* 如果你想保证数据的高可用性，即最大限度的避免数据丢失，那么RDB将不是一个很好的选择。因为系统一旦在定时持久化之前出现宕机现象，此前没有来得及写入磁盘的数据都将丢失。

* 由于RDB是通过fork子进程来协助完成数据持久化工作的，因此，如果当数据集较大时，可能会导致整个服务器停止服务几百毫秒，甚至是1秒钟

RDB持久化机制的配置:

在redis.windows.conf配置文件中有如下配置：
```java
################################ SNAPSHOTTING #################################
#
# Save the DB on disk:
#
# save &lt;seconds&gt; &lt;changes&gt;
#
# Will save the DB if both the given number of seconds and the given
# number of write operations against the DB occurred.
#
# In the example below the behaviour will be to save:
# after 900 sec (15 min) if at least 1 key changed
# after 300 sec (5 min) if at least 10 keys changed
# after 60 sec if at least 10000 keys changed
#
# Note: you can disable saving at all commenting all the &quot;save&quot; lines.
#
# It is also possible to remove all the previously configured save
# points by adding a save directive with a single empty string argument
# like in the following example:
#
# save &quot;&quot;
save 900 1
save 300 10
save 60 10000</code></pre><p>其中，上面配置的是RDB方式数据持久化时机：</p>
<p><img src="/2020/04/12/day46-redis/2.jpg" alt></p>
<h4 id="AOF持久化机制"><a href="#AOF持久化机制" class="headerlink" title="AOF持久化机制"></a>AOF持久化机制</h4><p>AOF持久化机制优点:</p>
<ul>
<li><p>该机制可以带来更高的数据安全性，即数据持久性。Redis中提供了3中同步策略，即每秒同步、每修改同步和不同步。事实上，每秒同步也是异步完成的，其效率也是非常高的，所差的是一旦系统出现宕机现象，那么这一秒钟之内修改的数据将会丢失。而每修改同步，我们可以将其视为同步持久化，即每次发生的数据变化都会被立即记录到磁盘中。可以预见，这种方式在效率上是最低的。至于无同步，无需多言，我想大家都能正确的理解它。</p>
</li>
<li><p>由于该机制对日志文件的写入操作采用的是append模式，因此在写入过程中即使出现宕机现象，也不会破坏日志文件中已经存在的内容。然而如果我们本次操作只是写入了一半数据就出现了系统崩溃问题，不用担心，在Redis下一次启动之前，我们可以通redis-check-aof工具来帮助我们解决数据一致性的问题。</p>
</li>
<li><p>如果日志过大，Redis可以自动启用rewrite机制。即Redis以append模式不断的将修改数据写入到老的磁盘文件中，同时Redis还会创建一个新的文件用于记录此期间有哪些修改命令被执行。因此在进行rewrite切换时可以更好的保证数据安全性。</p>
</li>
<li><p>AOF包含一个格式清晰、易于理解的日志文件用于记录所有的修改操作。事实上，我们也可以通过该文件完成数据的重建</p>
</li>
</ul>
<p>AOF持久化机制缺点:</p>
<ul>
<li><p>对于相同数量的数据集而言，AOF文件通常要大于RDB文件</p>
</li>
<li><p>根据同步策略的不同，AOF在运行效率上往往会慢于RDB。总之，每秒同步策略的效率是比较高的，同步禁用策略的效率和RDB一样高效。</p>
</li>
</ul>
<p>AOF持久化机制配置:</p>
<p>开启AOF持久化</p>
<pre class=" language-java"><code class="language-java">############################## APPEND ONLY MODE ###############################
# By <span class="token keyword">default</span> Redis asynchronously dumps the dataset on disk<span class="token punctuation">.</span> This mode is
# good enough in many applications<span class="token punctuation">,</span> but an issue with the Redis process or
# a power outage may result into a few minutes of writes <span class="token function">lost</span> <span class="token punctuation">(</span>depending on
# the configured save points<span class="token punctuation">)</span><span class="token punctuation">.</span>
#
# The Append Only File is an alternative persistence mode that provides
# much better durability<span class="token punctuation">.</span> For instance using the <span class="token keyword">default</span> data fsync policy
# <span class="token punctuation">(</span>see later in the config file<span class="token punctuation">)</span> Redis can lose just one second of writes in a
# dramatic event like a server power outage<span class="token punctuation">,</span> or a single write <span class="token keyword">if</span> something
# wrong with the Redis process itself happens<span class="token punctuation">,</span> but the operating system is
# still running correctly<span class="token punctuation">.</span>
#
# AOF and RDB persistence can be enabled at the same time without problems<span class="token punctuation">.</span>
# If the AOF is enabled on startup Redis will load the AOF<span class="token punctuation">,</span> that is the file
# with the better durability guarantees<span class="token punctuation">.</span>
#
# Please check http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>redis<span class="token punctuation">.</span>io<span class="token operator">/</span>topics<span class="token operator">/</span>persistence <span class="token keyword">for</span> more information<span class="token punctuation">.</span>
appendonly no</code></pre>
<p>将appendonly修改为yes，开启aof持久化机制，默认会在目录下产生一个appendonly.aof文件</p>
<p>AOF持久化时机:<br><img src="/2020/04/12/day46-redis/3.jpg" alt></p>
<h2 id="1-3-Jedis"><a href="#1-3-Jedis" class="headerlink" title="1.3 Jedis"></a>1.3 Jedis</h2><h3 id="1-3-1-jedis的介绍"><a href="#1-3-1-jedis的介绍" class="headerlink" title="1.3.1 jedis的介绍"></a>1.3.1 jedis的介绍</h3><p>Redis不仅是使用命令来操作，现在基本上主流的语言都有客户端支持，比如java、C、C#、C++、php、Node.js、Go等。 在官方网站里列一些Java的客户端，有Jedis、Redisson、Jredis、JDBC-Redis、等其中官方推荐使用Jedis和Redisson。 在企业中用的最多的就是Jedis.</p>
<p>使用Jedis操作redis需要导入jar包</p>
<h3 id="1-3-2-jedis的基本操作"><a href="#1-3-2-jedis的基本操作" class="headerlink" title="1.3.2 jedis的基本操作"></a>1.3.2 jedis的基本操作</h3><h4 id="jedis常用API"><a href="#jedis常用API" class="headerlink" title="jedis常用API"></a>jedis常用API</h4><p><img src="/2020/04/12/day46-redis/4.jpg" alt></p>
<p>示例代码</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisUtilSnapshot</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//0. 导入jar包o</span>
        <span class="token comment" spellcheck="true">//1.  建立与redis的连接</span>
        Jedis connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//2. 使用该连接 执行命令</span>
        <span class="token comment" spellcheck="true">//connection.set("test","小明");</span>
        String s <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//3.关闭连接</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="1-3-3-jedis连接池的使用"><a href="#1-3-3-jedis连接池的使用" class="headerlink" title="1.3.3 jedis连接池的使用"></a>1.3.3 jedis连接池的使用</h3><p>jedis连接资源的创建与销毁是很消耗程序性能，所以jedis为我们提供了jedis的池化技术，jedisPool在创建时初始化一些连接资源存储到连接池中，使用jedis连接资源时不需要创建，而是从连接池中获取一个资源进行redis的操作，使用完毕后，不需要销毁该jedis连接资源，而是将该资源归还给连接池，供其他请求使用。</p>
<p>jedisPool的基本使用</p>
<pre class=" language-java"><code class="language-java">
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        获取连接  不能自己创建了   首先创建一个连接池
        GenericObjectPoolConfig poolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//初始化</span>
        poolConfig<span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//最大空闲</span>
        poolConfig<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//最多..</span>
        poolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        poolConfig<span class="token punctuation">.</span><span class="token function">setMaxWaitMillis</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        JedisPool pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>poolConfig<span class="token punctuation">,</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment" spellcheck="true">//需要连接 从池中借出一个</span>
        Jedis connection <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment" spellcheck="true">//操作方法</span>
        String s <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment" spellcheck="true">//归还连接池</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Jedis connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<p>jedis连接池工具类</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> JedisPool pool <span class="token operator">=</span>null<span class="token punctuation">;</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//获取连接  不能自己创建了   首先创建一个连接池</span>
        GenericObjectPoolConfig poolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Properties properties<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>RedisUtil<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"redis.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> minIdle <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"redis.minIdle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> maxIdle <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"redis.maxIdle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> maxTotal <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"redis.maxTotal"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> maxWaitMillis <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"redis.maxWaitMillis"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String host <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"redis.host"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> port <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"redis.port"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment" spellcheck="true">//初始化</span>
            poolConfig<span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span>minIdle<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//最大空闲</span>
            poolConfig<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span>maxIdle<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//最多..</span>
            poolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span>maxTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>

            poolConfig<span class="token punctuation">.</span><span class="token function">setMaxWaitMillis</span><span class="token punctuation">(</span>maxWaitMillis<span class="token punctuation">)</span><span class="token punctuation">;</span>

            pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>poolConfig<span class="token punctuation">,</span> host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closePool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        pool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> Jedis <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//需要连接 从池中借出一个</span>
        Jedis connection <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>


        Jedis connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day45-AJAX-Json" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day45-ajax-json/">day45-AJAX-Json</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day45-ajax-json/" class="article-date">
  <time datetime="2020-04-12T09:42:01.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day45-AJAX-amp-Json"><a href="#day45-AJAX-amp-Json" class="headerlink" title="day45_AJAX&amp;Json"></a>day45_AJAX&amp;Json</h1><h2 id="1-1-AJAX"><a href="#1-1-AJAX" class="headerlink" title="1.1 AJAX"></a>1.1 AJAX</h2><h3 id="1-1-1-AJAX原理"><a href="#1-1-1-AJAX原理" class="headerlink" title="1.1.1 AJAX原理"></a>1.1.1 AJAX原理</h3><h4 id="什么是异步请求和异步请求"><a href="#什么是异步请求和异步请求" class="headerlink" title="什么是异步请求和异步请求"></a>什么是异步请求和异步请求</h4><p>AJAX=Asynchronous Javascript And XML</p>
<p>同步现象：客户端发送请求到服务器端，当服务器返回响应之前，客户端都处于等待，卡死<br>状态</p>
<p>异步现象：客户端发送请求到服务器端，无论服务器是否返回响应，客户端都可以随 意做其<br>他事情，不会被卡死</p>
<h3 id="1-1-2-AJAX的使用"><a href="#1-1-2-AJAX的使用" class="headerlink" title="1.1.2 AJAX的使用"></a>1.1.2 AJAX的使用</h3><p>页面发起请求，会将请求发送给浏览器内核中的Ajax引擎，Ajax引擎会提交请求到客户端，<br>在这段时间里，客户端可以任意进行任意操作，直到服务器端将数据返回给 Ajax引擎后，会触发你设置的事件，从而执行自定义的js逻辑代码完成某种页面功能。</p>
<p><img src="/2020/04/12/day45-ajax-json/1.png" alt></p>
<h4 id="基本步骤"><a href="#基本步骤" class="headerlink" title="基本步骤"></a>基本步骤</h4><ol>
<li>获得ajax引擎</li>
<li>设置回调函数</li>
<li>确定请求路径</li>
<li>发送请求</li>
</ol>
<h4 id="原生态JavaScript实现AJAX程序"><a href="#原生态JavaScript实现AJAX程序" class="headerlink" title="原生态JavaScript实现AJAX程序"></a>原生态JavaScript实现AJAX程序</h4><pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">req</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//1.创建ajax的核心引擎对象 XMLHttpRequest对象</span>
            <span class="token keyword">var</span> xhr<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>xhr<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//兼容ie 5 6 7的</span>
                xhr<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment" spellcheck="true">//2.提前告知这个对象 后续操作(回调函数)</span>
            xhr<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//操作 获取服务器端返回的数据</span>
                    <span class="token keyword">var</span> data<span class="token operator">=</span>xhr<span class="token punctuation">.</span>responseText
                    <span class="token comment" spellcheck="true">//alert(data);</span>
                    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>data<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">//3.告知这个对象 请求方式 请求地址</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span><span class="token string">"http://localhost/hello?username=xiaoming"</span><span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true">//4.调用发送方法</span>
            xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-1-3-jQuery实现AJAX"><a href="#1-1-3-jQuery实现AJAX" class="headerlink" title="1.1.3 jQuery实现AJAX"></a>1.1.3 jQuery实现AJAX</h3><h4 id="get-函数实现AJAJX-不带参"><a href="#get-函数实现AJAJX-不带参" class="headerlink" title="$.get()函数实现AJAJX(不带参)"></a>$.get()函数实现AJAJX(不带参)</h4><pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">req</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost/hello"</span><span class="token punctuation">,</span><span class="token string">"username=xiaoming"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>

                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<p>注意：get和post函数的写法完全一致，区别在于get提交参数在请求行，而post提交参数在请求体</p>
<h4 id="post-函数实现AJAJX-不带参"><a href="#post-函数实现AJAJX-不带参" class="headerlink" title="$.post()函数实现AJAJX(不带参)"></a>$.post()函数实现AJAJX(不带参)</h4><pre class=" language-javascript"><code class="language-javascript">   <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">req</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://localhost/hello"</span><span class="token punctuation">,</span><span class="token string">"username=xiaoming"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>

                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#content"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<p>注意：不带方法签名，去掉｛｝，不在需要写方法签名，例如 url: data:等，但是注意参<br>数的顺序不能错，参数的顺序必须是 url-&gt;data-&gt;success-&gt;dataType，</p>
<h4 id="ajax-函数实现AJAJX-带参"><a href="#ajax-函数实现AJAJX-带参" class="headerlink" title="$.ajax()函数实现AJAJX(带参)"></a>$.ajax()函数实现AJAJX(带参)</h4><p>$.ajax方法是get和post的底层实现方法，该方法使用更灵活，参数更丰富，并可以设置异步或同步。上层方法简单易用，代码量较少。底层方法灵活性更强，方法签名更多，代码量比较多</p>
<pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">req</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                url<span class="token punctuation">:</span><span class="token string">"http://localhost/hello"</span><span class="token punctuation">,</span>
                data<span class="token punctuation">:</span><span class="token string">"username=xiaoming"</span><span class="token punctuation">,</span>
                type<span class="token punctuation">:</span><span class="token string">"get"</span><span class="token punctuation">,</span>
                success<span class="token punctuation">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                error<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"出错了...."</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h2 id="1-2-Json"><a href="#1-2-Json" class="headerlink" title="1.2 Json"></a>1.2 Json</h2><p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。JSON采用完全独立于语言的文本格式，就是说不同的编程语言JSON数据是一致的。JS原生支持JSON。</p>
<h3 id="1-2-1-JSON的两种数据格式"><a href="#1-2-1-JSON的两种数据格式" class="headerlink" title="1.2.1 JSON的两种数据格式"></a>1.2.1 JSON的两种数据格式</h3><ol>
<li><p>数组格式：var json2=”[1,’hello’,true]”;</p>
</li>
<li><p>对象格式：var json1=”{‘username’:’小明’,’age’:18,’vip’:true}”;</p>
</li>
</ol>
<p>两种格式可以进行任意的嵌套</p>
<h3 id="1-2-2-JSON数据解析"><a href="#1-2-2-JSON数据解析" class="headerlink" title="1.2.2 JSON数据解析"></a>1.2.2 JSON数据解析</h3><pre class=" language-javascript"><code class="language-javascript">      <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment" spellcheck="true">//对象</span>
        <span class="token keyword">var</span> json1<span class="token operator">=</span><span class="token string">"{'username':'小明','age':18,'vip':true}"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//最早诞生于js  肯定出一个简单方法用它的数据</span>
        <span class="token comment" spellcheck="true">//黑魔法函数</span>
        <span class="token keyword">var</span> jsonObj1<span class="token operator">=</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token operator">+</span>json1<span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>jsonObj1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//数组形式的</span>
        <span class="token keyword">var</span> json2<span class="token operator">=</span><span class="token string">"[1,'hello',true]"</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> jsonObj2<span class="token operator">=</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token operator">+</span>json2<span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>jsonObj2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-2-3-JS中特有的JSON格式"><a href="#1-2-3-JS中特有的JSON格式" class="headerlink" title="1.2.3 JS中特有的JSON格式"></a>1.2.3 JS中特有的JSON格式</h3><ol>
<li><p>数组格式： var json4=[“1”,”你好”,true,100];</p>
</li>
<li><p>对象格式： var json3={ “username”:”小明明”, “age”:19,”password”:”123”};</p>
</li>
</ol>
<p>解析</p>
<pre class=" language-javascript"><code class="language-javascript">      <span class="token operator">&lt;</span>script<span class="token operator">></span>
      <span class="token keyword">var</span> json3<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token string">"username"</span><span class="token punctuation">:</span><span class="token string">"小明明"</span><span class="token punctuation">,</span>
            <span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">,</span>
            <span class="token string">"password"</span><span class="token punctuation">:</span><span class="token string">"123"</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token function">alert</span><span class="token punctuation">(</span>json3<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
        <span class="token keyword">var</span> json4<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"你好"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>json4<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//开始嵌套</span>
        <span class="token keyword">var</span> json5<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token string">"username"</span><span class="token punctuation">:</span><span class="token string">"小明明"</span><span class="token punctuation">,</span>
            <span class="token string">"age"</span><span class="token punctuation">:</span><span class="token number">19</span><span class="token punctuation">,</span>
            <span class="token string">"password"</span><span class="token punctuation">:</span><span class="token string">"123"</span><span class="token punctuation">,</span>
            <span class="token string">"hobbies"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">"smoking"</span><span class="token punctuation">,</span><span class="token string">"drink"</span><span class="token punctuation">,</span><span class="token string">"tangtou"</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token function">alert</span><span class="token punctuation">(</span>json5<span class="token punctuation">.</span>hobbies<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-2-4-AJAX的json数据使用"><a href="#1-2-4-AJAX的json数据使用" class="headerlink" title="1.2.4 AJAX的json数据使用"></a>1.2.4 AJAX的json数据使用</h3><p>客户端向服务器发送请求，服务器响应的数据必须是json格式</p>
<pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">req</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                url<span class="token punctuation">:</span><span class="token string">"http://localhost/hello"</span><span class="token punctuation">,</span>
                data<span class="token punctuation">:</span><span class="token string">"username=xiaoming"</span><span class="token punctuation">,</span>
                type<span class="token punctuation">:</span><span class="token string">"get"</span><span class="token punctuation">,</span>
                dataType<span class="token punctuation">:</span><span class="token string">'json'</span><span class="token punctuation">,</span>
                success<span class="token punctuation">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                error<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"出错了...."</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-2-5-Java数据转成json格式数据"><a href="#1-2-5-Java数据转成json格式数据" class="headerlink" title="1.2.5 Java数据转成json格式数据"></a>1.2.5 Java数据转成json格式数据</h3><p>json的转换插件是通过java的一些工具，直接将java对象或集合转换成json字符串。常用的<br>json转换工具有如下几种：</p>
<ol>
<li>jsonlib</li>
<li>Gson</li>
<li>fastjson</li>
</ol>
<p>导入jar包后</p>
<p>示例代码</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JacksonTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JsonProcessingException <span class="token punctuation">{</span>
        String <span class="token punctuation">[</span><span class="token punctuation">]</span> ss<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"小明"</span><span class="token punctuation">,</span><span class="token string">"小绿"</span><span class="token punctuation">,</span><span class="token string">"小黑"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JsonProcessingException <span class="token punctuation">{</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"大郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"次郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"二蛋郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JsonProcessingException <span class="token punctuation">{</span>
        Set<span class="token operator">&lt;</span>String<span class="token operator">></span> set<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"大郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"次郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"二蛋郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JsonProcessingException <span class="token punctuation">{</span>
        Map map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"大郎"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">,</span><span class="token string">"卖炊饼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JsonProcessingException <span class="token punctuation">{</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"吃烧饼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"喝凉水"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"戴帽子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"大郎"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JsonProcessingException <span class="token punctuation">{</span>
        List<span class="token operator">&lt;</span>User<span class="token operator">></span> users<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"吃烧饼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"喝凉水"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"戴帽子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        User user1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"大郎"</span><span class="token punctuation">,</span> list1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"吃烧饼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"喝凉水"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"戴帽子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        User user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"二郎"</span><span class="token punctuation">,</span> list2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"吃烧饼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"喝凉水"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"戴帽子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        User user3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"金莲.."</span><span class="token punctuation">,</span> list3<span class="token punctuation">)</span><span class="token punctuation">;</span>

        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> hobbies<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> hobbies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> hobbies<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">getHobbies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hobbies<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHobbies</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>String<span class="token operator">></span> hobbies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> hobbies<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day44jQuery高级" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day44jquery-gao-ji/">day44jQuery高级</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day44jquery-gao-ji/" class="article-date">
  <time datetime="2020-04-12T09:41:24.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day44jQuery高级"><a href="#day44jQuery高级" class="headerlink" title="day44jQuery高级"></a>day44jQuery高级</h1><h2 id="1-1-jQuery遍历"><a href="#1-1-jQuery遍历" class="headerlink" title="1.1 jQuery遍历"></a>1.1 jQuery遍历</h2><p>jQuery对象本身就是数组对象，通过jQuery选择器获得的都是满足该选择器条件的元素对象的集合体。因此在常常需要对jQuery对象进行遍历。我们会学习三种遍历jQuery的方法</p>
<h3 id="1-1-1-传统循环遍历"><a href="#1-1-1-传统循环遍历" class="headerlink" title="1.1.1 传统循环遍历"></a>1.1.1 传统循环遍历</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
            <span class="token comment" spellcheck="true">/**
             * 传统形式遍历
             */</span>
            window<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//dom对象获取所有的标签option</span>
                <span class="token keyword">var</span> options <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>options<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>options<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>    
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-1-2-jQuery对象的方法"><a href="#1-1-2-jQuery对象的方法" class="headerlink" title="1.1.2 jQuery对象的方法"></a>1.1.2 jQuery对象的方法</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//jQuery方式获取option标签</span>
                <span class="token keyword">var</span> $option <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//jQuery对象调用函数each</span>
                <span class="token comment" spellcheck="true">/**
                 *  匿名函数,回调函数
                 *  each函数调用
                 *  参数: 索引, 遍历到的元素
                 *  each遍历数组,遍历一次调用一次匿名函数
                 */</span>
                $option<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>element<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//alert(index+"==="+element);</span>
                    <span class="token comment" spellcheck="true">//jQuery对象本质数组,遍历的元素DOM对象</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>  <span class="token function">$</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-1-3-jQuery全局函数each遍历"><a href="#1-1-3-jQuery全局函数each遍历" class="headerlink" title="1.1.3 jQuery全局函数each遍历"></a>1.1.3 jQuery全局函数each遍历</h3><p>  jQuery框架定义函数,each</p>
<p>  不需要jQuery对象调用, $调用的</p>
<p>  $.each()  </p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//jQuery方式获取option标签</span>
                <span class="token keyword">var</span> $option <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
                <span class="token keyword">var</span> options <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"option"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
                <span class="token comment" spellcheck="true">//jQuery符号$直接调用全局函数each</span>
                <span class="token comment" spellcheck="true">/**
                 * 全局函数each的参数
                 * 被遍历的对象
                 * 回调函数,传递索引和元素
                 * 好处: 遍历的容器可以是jQuery对象,也可以是DOM对象
                 */</span>
                $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-1-4-增强for"><a href="#1-1-4-增强for" class="headerlink" title="1.1.4 增强for"></a>1.1.4 增强for</h3><pre class=" language-java"><code class="language-java">格式<span class="token operator">:</span>  
<span class="token keyword">for</span><span class="token punctuation">(</span> 元素  of  容器<span class="token punctuation">)</span><span class="token punctuation">{</span>

 <span class="token punctuation">}</span>

举例<span class="token operator">:</span> 
<span class="token keyword">for</span><span class="token punctuation">(</span>element of $<span class="token punctuation">(</span><span class="token string">"options"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    执行语句<span class="token punctuation">;</span> 
<span class="token punctuation">}</span></code></pre>
<h2 id="1-2-jQuery的事件"><a href="#1-2-jQuery的事件" class="headerlink" title="1.2 jQuery的事件"></a>1.2 jQuery的事件</h2><h3 id="1-2-1-常用事件"><a href="#1-2-1-常用事件" class="headerlink" title="1.2.1 常用事件"></a>1.2.1 常用事件</h3><p><img src="/2020/04/12/day44jquery-gao-ji/1.jpg" alt></p>
<h3 id="1-2-2-DOM对象绑定事件"><a href="#1-2-2-DOM对象绑定事件" class="headerlink" title="1.2.2 DOM对象绑定事件"></a>1.2.2 DOM对象绑定事件</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
            window<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//获取按钮</span>
                <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"btn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//DOM对象的事件属性</span>
                btn<span class="token punctuation">.</span>onclick  <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"按钮被点击"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-2-3-jQuery对象绑定事件"><a href="#1-2-3-jQuery对象绑定事件" class="headerlink" title="1.2.3 jQuery对象绑定事件"></a>1.2.3 jQuery对象绑定事件</h3><p>on(events,selector,fn(data))函数绑定</p>
<ol>
<li>参数events：事件名称，多个事件之间空格分开。”click mouseover”</li>
<li>参数selector：绑定事件元素的子代元素，不传递参数，表示该元素自己绑定事件</li>
<li>参数data：事件中要传递给响应函数的参数</li>
<li>参数fn：事件相应的函数</li>
</ol>
<p>  jQuery对象中函数,实现对一个事件源同时绑定多个事件 on</p>
<pre class=" language-javascript"><code class="language-javascript">    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>

          绑定一个事件 <span class="token punctuation">:</span> 
          <span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"事件名称"</span> <span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
           <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#b1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"click"</span> <span class="token punctuation">,</span>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"always  on ... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        


        <span class="token operator">*</span> 绑定多个事件<span class="token punctuation">,</span> 做多个事情<span class="token punctuation">.</span>  相当于是绑定多个键值对<span class="token punctuation">.</span> 
         <span class="token operator">*</span>   <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">{</span> key<span class="token punctuation">:</span>value <span class="token punctuation">,</span> key<span class="token punctuation">:</span>value <span class="token punctuation">,</span>key<span class="token punctuation">:</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token operator">*</span> 
         <span class="token operator">*</span>  <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"事件名"</span><span class="token punctuation">:</span>f <span class="token function">unction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
         <span class="token operator">*</span>         <span class="token operator">...</span> 
         <span class="token operator">*</span>       <span class="token punctuation">}</span>  <span class="token punctuation">,</span>
         <span class="token operator">*</span>      <span class="token string">"事件名2"</span> <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
         <span class="token operator">*</span>          <span class="token operator">...</span>  
         <span class="token operator">*</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token operator">*</span>  

             <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">"mouseover"</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">// 改变颜色 </span>
                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">"mouseout"</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"background-color"</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">"click"</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-2-4-jQuery解绑事件"><a href="#1-2-4-jQuery解绑事件" class="headerlink" title="1.2.4 jQuery解绑事件"></a>1.2.4 jQuery解绑事件</h3><p>  jQuery对象的函数 off</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            对象<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"事件名称"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
             <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#f"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">"mouseover"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h2 id="1-3-validate表单验证插件"><a href="#1-3-validate表单验证插件" class="headerlink" title="1.3 validate表单验证插件"></a>1.3 validate表单验证插件</h2><p>网络上有许多成熟的插件共使用者参考，插件就是将jquery实现的常用操作进行封装，封装后的“小框架“就可以叫做插件，按照插件的语法去操作可以实现很多复杂 的功能，而我们需要做的是学会该插件的使用语法即可。我们仅是要使用的是jquery关于表单校验的插件。</p>
<p>使用步骤</p>
<ol>
<li>下载jquery-validation插件</li>
<li>将该插件（也就是一个js文件）导入到我们的工程中</li>
<li>在要使用校验插件的html中引入该js文件</li>
</ol>
<h3 id="1-3-1-表单验证案例"><a href="#1-3-1-表单验证案例" class="headerlink" title="1.3.1 表单验证案例"></a>1.3.1 表单验证案例</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#empForm"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//表单验证的规则</span>
                    rules<span class="token punctuation">:</span><span class="token punctuation">{</span>
                        <span class="token comment" spellcheck="true">//真实姓名,必须填写</span>
                        realname<span class="token punctuation">:</span><span class="token string">"required"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//登录名,必须填写,长度5-8</span>
                        username<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            rangelength<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//密码规则,必须填写,长度6-12</span>
                        psw<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            rangelength<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//确认密码,必须填写,和密码一致</span>
                        psw2<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            equalTo<span class="token punctuation">:</span><span class="token string">"#psw"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//性别规则,必须选择一个</span>
                        gender<span class="token punctuation">:</span><span class="token string">"required"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//年龄规则,必须填写,范围26-50之间</span>
                        age<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            range<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//学历规则,必须选一个</span>
                        edu<span class="token punctuation">:</span><span class="token string">"required"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//生日规则,必须填写,格式正确,合法 </span>
                        birthday<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            dateISO<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            date<span class="token punctuation">:</span><span class="token boolean">true</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//爱好规则,必须选一个</span>
                        checkbox1<span class="token punctuation">:</span><span class="token string">"required"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//邮箱规则,必须填写,符号邮件地址规则</span>
                        email<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            email<span class="token punctuation">:</span><span class="token boolean">true</span>
                        <span class="token punctuation">}</span>

                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token comment" spellcheck="true">//验证消息</span>
                    messages<span class="token punctuation">:</span><span class="token punctuation">{</span>
                        <span class="token comment" spellcheck="true">//真实姓名消息</span>
                        realname<span class="token punctuation">:</span><span class="token string">"请填写真实姓名"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//登录名消息</span>
                        username<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token string">"必须填写登录名"</span><span class="token punctuation">,</span>
                            rangelength<span class="token punctuation">:</span><span class="token string">"用户名长度必须5-8位"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//密码消息</span>
                        psw<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token string">"必须填写密码"</span><span class="token punctuation">,</span>
                            rangelength<span class="token punctuation">:</span><span class="token string">"密码长度必须6-12位"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//确认密码消息</span>
                        psw2<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token string">"必须填写密码"</span><span class="token punctuation">,</span>
                            equalTo<span class="token punctuation">:</span><span class="token string">"两次密码不一致"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//姓名消息</span>
                        gender<span class="token punctuation">:</span><span class="token string">"必须选"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//年龄消息</span>
                        age<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token string">"必须填写年龄"</span><span class="token punctuation">,</span>
                            range<span class="token punctuation">:</span><span class="token string">"年龄必须在26-50之间"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//学历消息</span>
                        edu<span class="token punctuation">:</span><span class="token string">"请选择一个学历"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//生日消息</span>
                        birthday<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token string">"必须填写生日"</span><span class="token punctuation">,</span>
                            dateISO<span class="token punctuation">:</span><span class="token string">"日期格式不正确"</span><span class="token punctuation">,</span>
                            date<span class="token punctuation">:</span><span class="token string">"日期不存在"</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//爱好消息</span>
                        checkbox1<span class="token punctuation">:</span><span class="token string">"请选择一个爱好"</span><span class="token punctuation">,</span>
                        <span class="token comment" spellcheck="true">//邮箱消息</span>
                        email<span class="token punctuation">:</span><span class="token punctuation">{</span>
                            required<span class="token punctuation">:</span><span class="token string">"必须填写邮箱"</span><span class="token punctuation">,</span>
                            email<span class="token punctuation">:</span><span class="token string">"邮箱格式不正确"</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h3 id="1-3-2-自定义验证规则"><a href="#1-3-2-自定义验证规则" class="headerlink" title="1.3.2 自定义验证规则"></a>1.3.2 自定义验证规则</h3><p>  标准语法规则, jQuery选择符号$调用插件属性validator</p>
<p>  属性调用插件函数 addMethod()</p>
<p>  参数:</p>
<ul>
<li>规则名</li>
<li>回调函数</li>
</ul>
<pre class=" language-javascript"><code class="language-javascript"> <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>

            <span class="token comment" spellcheck="true">/*
             * 匿名函数中具有三个参数
             * value   : 文本框输入的值
             * element : 文本框标签对象
             * param   : 规则后面的参数   range:[5,10]
             */</span>
            <span class="token comment" spellcheck="true">//自定义身份证号的15位规则</span>
            $<span class="token punctuation">.</span>validator<span class="token punctuation">.</span><span class="token function">addMethod</span><span class="token punctuation">(</span><span class="token string">"cart15"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>element<span class="token punctuation">,</span>param<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//文本框输入的值 value判断</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">18</span><span class="token punctuation">)</span>
                  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//定义15位规则,全数字</span>
                <span class="token keyword">var</span> reg<span class="token operator">=</span><span class="token regex">/^[0-9]{15}$/</span><span class="token punctuation">;</span>

                <span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//自定义身份证号的是18位规则</span>
            $<span class="token punctuation">.</span>validator<span class="token punctuation">.</span><span class="token function">addMethod</span><span class="token punctuation">(</span><span class="token string">"cart18"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>element<span class="token punctuation">,</span>param<span class="token punctuation">)</span><span class="token punctuation">{</span>
                 <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">15</span><span class="token punctuation">)</span>
                   <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//定义18位规则,前17个数字,最后一位可以是数字,可以是X</span>
                <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[0-9]{17}[0-9X]{1}$/</span><span class="token punctuation">;</span>

                <span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//自定义身份证的长度规则</span>
            $<span class="token punctuation">.</span>validator<span class="token punctuation">.</span><span class="token function">addMethod</span><span class="token punctuation">(</span><span class="token string">"cartlength"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>element<span class="token punctuation">,</span>param<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">15</span> <span class="token operator">||</span> value<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">18</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//身份证号规则</span>
cart<span class="token punctuation">:</span><span class="token punctuation">{</span>
    required<span class="token punctuation">:</span><span class="token string">"必须填写身份证号"</span><span class="token punctuation">,</span>
    cartlength<span class="token punctuation">:</span><span class="token string">"身份证号码长度只能是15或18位"</span><span class="token punctuation">,</span>
    cart15<span class="token punctuation">:</span><span class="token string">"15位格式全数字"</span><span class="token punctuation">,</span>
    cart18<span class="token punctuation">:</span><span class="token string">"18位格式全数字,最后一位可以是X"</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="1-3-3-日期插件"><a href="#1-3-3-日期插件" class="headerlink" title="1.3.3 日期插件"></a>1.3.3 日期插件</h3><pre class=" language-java"><code class="language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
                     引入第三方提供的日期插件 <span class="token punctuation">.</span>
                     <span class="token number">1</span><span class="token punctuation">.</span> 拷贝 My97DatePicker 目录 到 js目录下 
                     <span class="token number">2</span><span class="token punctuation">.</span> 引入 WdatePicker<span class="token punctuation">.</span>js 文件 
                     <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../js/My97DatePicker/WdatePicker.js"</span> type<span class="token operator">=</span><span class="token string">"text/javascript"</span> charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

                     <span class="token number">3</span><span class="token punctuation">.</span> 文本框绑定点击事件 <span class="token punctuation">,</span> 调用 <span class="token function">WdatePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>tr<span class="token operator">></span>
    <span class="token operator">&lt;</span>td<span class="token operator">></span>出生日期<span class="token punctuation">(</span><span class="token number">1982</span><span class="token operator">/</span><span class="token number">09</span><span class="token operator">/</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
    <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"birthday"</span> name<span class="token operator">=</span><span class="token string">"birthday"</span> value<span class="token operator">=</span><span class="token string">""</span> onclick<span class="token operator">=</span><span class="token string">"WdatePicker()"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span></code></pre>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day43jQuery基础" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day43jquery-ji-chu/">day43jQuery基础</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day43jquery-ji-chu/" class="article-date">
  <time datetime="2020-04-12T09:40:51.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day43jQuery基础"><a href="#day43jQuery基础" class="headerlink" title="day43jQuery基础"></a>day43jQuery基础</h1><h2 id="1-1-jQuery入门"><a href="#1-1-jQuery入门" class="headerlink" title="1.1  jQuery入门"></a>1.1  jQuery入门</h2><h3 id="1-1-1-jQuery介绍"><a href="#1-1-1-jQuery介绍" class="headerlink" title="1.1.1 jQuery介绍"></a>1.1.1 jQuery介绍</h3><p>jQuery是一个快速、简洁的JavaScript框架，是继Prototype之后又一个优秀JavaScript代码库（或JavaScript框架）。jQuery设计的宗旨是“write Less，Do More”，即倡导写更少的代码，做更多的事情。它封装JavaScript常用的功能代码，提供一种简便的JavaScript设计模式，优化HTML文档操作、事件处理、动画设计和Ajax交互。jQuery实现了跨越浏览器，开发者不需要在关注浏览器的兼容性了，但是从2.0版本开始，不在兼容IE6，7，8</p>
<h3 id="1-1-2-jQuery基本使用方式"><a href="#1-1-2-jQuery基本使用方式" class="headerlink" title="1.1.2 jQuery基本使用方式"></a>1.1.2 jQuery基本使用方式</h3><p>页面中引入jQuery文件</p>
<pre class=" language-javaScript"><code class="language-javaScript"><script src="../js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script></code></pre>
<p>首先调用jQuery中的核心函数，函数的名就是jQuery，在此函数的参数中传递匿名函数，这<br>个匿名函数将在页面加载完成后执行，相当于window.onload(在页面中只能执行一次)，同事函数名jQuery可以简写为$。同时$也是jQuery中的选择器，可以查找页面中的标签元素。</p>
<pre class=" language-javaScript"><code class="language-javaScript">        <script type="text/javascript">

        $(function(){
            alert("hello jQuery !!!")
        });

        $(function(){
            alert("hello jQuery222 !!!")
        });

        </script></code></pre>
<h3 id="1-1-3-DOM对象和jQuery对象的相互转换"><a href="#1-1-3-DOM对象和jQuery对象的相互转换" class="headerlink" title="1.1.3 DOM对象和jQuery对象的相互转换"></a>1.1.3 DOM对象和jQuery对象的相互转换</h3><p>DOM对象和jQuery对象相互是不通用的，也就是说document.getXXX()获取到的元素，属于<br>DOM对象，只能调用DOM对象中提供的方法和属性。而使用$(“XX”)获取到的元素属于jQuery对象，只能调用jQuery对象的方法。</p>
<p>将DOM对象转成jQuery对象，使用$包裹即可</p>
<pre class=" language-javaScript"><code class="language-javaScript">var $jquery = $(dom对象)；</code></pre>
<p>jQuery对象转成DOM对象</p>
<pre class=" language-javaScript"><code class="language-javaScript">var dom = $jquery[0];</code></pre>
<h2 id="1-2-jQuery选择器"><a href="#1-2-jQuery选择器" class="headerlink" title="1.2 jQuery选择器"></a>1.2 jQuery选择器</h2><p>jQuery的选择器与css的选择器的作用是完全一样的，目的是精确快速的定位到某个html元素上并获取该元素对象，进而使用jQuery的方法对该html进行操作。jQuery常用的选择器有如下：基本选择器，层级选择器，属性选择器，基本过滤选择器，表单属性选择器等</p>
<h3 id="1-2-1-基本选择器"><a href="#1-2-1-基本选择器" class="headerlink" title="1.2.1 基本选择器"></a>1.2.1 基本选择器</h3><ol>
<li>标签选择器（元素选择器）：$(“html标签名”)</li>
<li>id选择器：$(“#id的属性值”)</li>
<li>类选择器：$(“.class的属性值”)</li>
</ol>
<h3 id="1-2-2-层级选择器"><a href="#1-2-2-层级选择器" class="headerlink" title="1.2.2 层级选择器"></a>1.2.2 层级选择器</h3><ol>
<li>获得A元素内部的所有的B元素：$(“A B “)</li>
<li>获得A元素下面的所有B子元素：$(“A &gt; B”)</li>
<li>获得A元素同级下一个B元素：$(“A + B”)</li>
<li>获得A元素同级所有后面B元素：$(“A ~ B”)</li>
</ol>
<p>siblings方法,选择所有的同级标签</p>
<h3 id="1-2-3-属性选择器"><a href="#1-2-3-属性选择器" class="headerlink" title="1.2.3 属性选择器"></a>1.2.3 属性选择器</h3><ol>
<li>$(“标签名[属性名]”)  包含这个属性就选择</li>
</ol>
<ol start="2">
<li>$(“标签名[属性名=值]”) 有这个属性的值就选择</li>
</ol>
<ol start="3">
<li>标签名[属性名!=’属性值’]  不含某种属性值 ,就选择</li>
</ol>
<ol start="4">
<li>标签名[属性名*=’属性值’]  *=  包含属性值 包含属性就选择</li>
</ol>
<ol start="5">
<li>标签名[属性名$=’属性值’]  $=  以属性值结束 以什么结束就选择</li>
</ol>
<ol start="6">
<li>标签名[属性名^=’属性值’]  ^=  以属性值开始. 以什么开始就选择</li>
</ol>
<ol start="7">
<li>$(“标签名[属性名!=值][属性名!=值][属性名!=值]”) 含有多个满足的元素就选择</li>
</ol>
<h3 id="1-2-4-基本过滤选择器"><a href="#1-2-4-基本过滤选择器" class="headerlink" title="1.2.4 基本过滤选择器"></a>1.2.4 基本过滤选择器</h3><ol>
<li>$(“div:first”).css(“background-color”, “red”);  first：  第一个标签</li>
</ol>
<ol start="2">
<li>$(“div:last”).css(“background-color”, “red”);   last：   最后一个标签’</li>
</ol>
<ol start="3">
<li>$(“div:not(.one)”).css(“background-color”, “red”);  not： 取反</li>
</ol>
<ol start="4">
<li>$(“div:even”).css(“background-color”, “red”);     even:  下标为偶数</li>
</ol>
<ol start="5">
<li>$(“div:odd”).css(“background-color”, “green”);    odd:    下标为奇数</li>
</ol>
<ol start="6">
<li>$(“div:gt(3)”).css(“background-color”, “green”);  gt(index): 大于index的<br>标签</li>
</ol>
<ol start="7">
<li>$(“div:lt(3)”).css(“background-color”, “green”);   lt(index)：小于index的标签</li>
</ol>
<ol start="8">
<li>$(“div:eq(3)”).css(“background-color”, “green”);   eq(index) 等于index的标签</li>
</ol>
<ol start="9">
<li><p>$(“:header”).css(“background-color”, “green”);  header：获得标题</p>
</li>
<li><p>$(“:animated”).css(“background-color”, “green”);  animated：获得正在执行的动画标签</p>
</li>
</ol>
<h3 id="1-2-5-表单属性选择器"><a href="#1-2-5-表单属性选择器" class="headerlink" title="1.2.5 表单属性选择器"></a>1.2.5 表单属性选择器</h3><ol>
<li>可用： :enabled</li>
</ol>
<ol start="2">
<li>不可用： :disabled</li>
</ol>
<ol start="3">
<li>选中（单选radio ，多选checkbox）： :checked</li>
</ol>
<ol start="4">
<li>选择（下列列表 select ）： :selected</li>
</ol>
<p>注意：这些选择器可以适当的结合使用</p>
<h2 id="1-3-jQuery的DOM方法操作"><a href="#1-3-jQuery的DOM方法操作" class="headerlink" title="1.3 jQuery的DOM方法操作"></a>1.3 jQuery的DOM方法操作</h2><h3 id="1-3-1-文本-值操作"><a href="#1-3-1-文本-值操作" class="headerlink" title="1.3.1 文本/值操作"></a>1.3.1 文本/值操作</h3><ol>
<li>html() === innerHTML</li>
</ol>
<ol start="2">
<li>text() === innerText</li>
</ol>
<ol start="3">
<li>val() === value</li>
</ol>
<p>注意：括号内 传递参数代表赋值 空参代表获取</p>
<h3 id="1-3-2-属性操作"><a href="#1-3-2-属性操作" class="headerlink" title="1.3.2 属性操作"></a>1.3.2 属性操作</h3><ol>
<li>attr() === setAttribute和getAttribute</li>
</ol>
<ol start="2">
<li>attr(属性名称); — 获取属性的值</li>
</ol>
<ol start="3">
<li>attr(属性名称,属性值) — 设置的属性的值</li>
</ol>
<ol start="4">
<li>removeAttr(“属性名称”);— 移除属性</li>
</ol>
<ol start="5">
<li>prop(“属性名称”));— 表单内使用获得属性值</li>
</ol>
<h3 id="1-3-3-css操作"><a href="#1-3-3-css操作" class="headerlink" title="1.3.3 css操作"></a>1.3.3 css操作</h3><ol>
<li>addClass（值） === attr(“class”,值)</li>
</ol>
<ol start="2">
<li>removeClass（class值） === removeAttr（“class值”）：不传参全部移除</li>
</ol>
<ol start="3">
<li>css() ==== js对象.style.属性</li>
</ol>
<ol start="4">
<li>css(css属性名) 获取css属性名称对应值</li>
</ol>
<ol start="5">
<li>css(css属性名,值) 设置css样式</li>
</ol>
<ol start="6">
<li>toggleClass(“属性值”);</li>
</ol>
<h3 id="1-3-4-元素创建-内部插入"><a href="#1-3-4-元素创建-内部插入" class="headerlink" title="1.3.4 元素创建/内部插入"></a>1.3.4 元素创建/内部插入</h3><ol>
<li>append() 追加子节点</li>
</ol>
<ol start="2">
<li>prepend() 追加子节点，在最前</li>
</ol>
<ol start="3">
<li>remove() 移除节点</li>
</ol>
<ol start="4">
<li>empty() 清空所有子节点</li>
</ol>
<h3 id="1-3-5-动画效果"><a href="#1-3-5-动画效果" class="headerlink" title="1.3.5 动画效果"></a>1.3.5 动画效果</h3><h4 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h4><ol>
<li>show(speed ,fn) 显示参数 speed，显示速度，单位：毫秒。固定字符串：slow, normal, orfast参数 fn，显示成功之后回调函数。</li>
</ol>
<ol start="2">
<li>hide() 隐藏</li>
</ol>
<ol start="3">
<li>toggle() 切换</li>
</ol>
<h4 id="元素的滑动显示与隐藏"><a href="#元素的滑动显示与隐藏" class="headerlink" title="元素的滑动显示与隐藏"></a>元素的滑动显示与隐藏</h4><ol>
<li>slideDown() 显示，高度变大。</li>
</ol>
<ol start="2">
<li>slideUp() 隐藏，高度变小。</li>
</ol>
<ol start="3">
<li>slideToggle() 切换</li>
</ol>
<h4 id="元素的淡入淡出的显示与隐藏"><a href="#元素的淡入淡出的显示与隐藏" class="headerlink" title="元素的淡入淡出的显示与隐藏"></a>元素的淡入淡出的显示与隐藏</h4><ol>
<li>fadeIn() 显示</li>
</ol>
<ol start="2">
<li>fadeOut() 隐藏</li>
</ol>
<ol start="3">
<li>fadeToggle() 切换</li>
</ol>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day42jdbc条件查询-分页" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day42jdbc-tiao-jian-cha-xun-fen-ye/">day42jdbc条件查询-分页</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day42jdbc-tiao-jian-cha-xun-fen-ye/" class="article-date">
  <time datetime="2020-04-12T09:39:18.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day42jdbc条件查询-amp-分页"><a href="#day42jdbc条件查询-amp-分页" class="headerlink" title="day42jdbc条件查询&amp;分页"></a>day42jdbc条件查询&amp;分页</h1><h2 id="1-1-案例：后台商品展示"><a href="#1-1-案例：后台商品展示" class="headerlink" title="1.1 案例：后台商品展示"></a>1.1 案例：后台商品展示</h2><p>在管理员页面,显示所有商品信息.  dao/service 不用改变 . 提供一个新的Servlet , 跳转到管理员商品显示页面. </p>
<h3 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/adminall"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminAllServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>


    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 创建 Service 对象</span>
        ProductService pservice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 调用查找所有商品的方法</span>
        List<span class="token operator">&lt;</span>Product<span class="token operator">></span> all <span class="token operator">=</span> pservice<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment" spellcheck="true">// 保存request 域中</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>all<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span> <span class="token punctuation">,</span> all<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// 跳转 管理员的商品页面</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/admin/product/list.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductDao</span> <span class="token punctuation">{</span>

    QueryRunner qr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>C3P0Utils<span class="token punctuation">.</span><span class="token function">getDS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Product<span class="token operator">></span> <span class="token function">queryAllProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>

        String sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM product"</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span>  qr<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span> sql<span class="token punctuation">,</span>  <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>Product<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductService</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 创建 Dao</span>
    ProductDao productDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Product<span class="token operator">></span> <span class="token function">queryAllProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>


        List<span class="token operator">&lt;</span>Product<span class="token operator">></span> products <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            products <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">queryAllProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> products<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> null<span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="domian"><a href="#domian" class="headerlink" title="domian"></a>domian</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> String pid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String pname<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> market_price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> shop_price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String pimage<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String pdate<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> is_hot<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String pdesc<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> pflag<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String cid<span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token punctuation">}</span>   </code></pre>
<h3 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h3><pre class=" language-java"><code class="language-java">    <span class="token operator">&lt;</span>c<span class="token operator">:</span>forEach var<span class="token operator">=</span><span class="token string">"p"</span> items<span class="token operator">=</span><span class="token string">"${list}"</span> varStatus<span class="token operator">=</span><span class="token string">"num"</span><span class="token operator">></span>

                            <span class="token operator">&lt;</span>tr onmouseover<span class="token operator">=</span><span class="token string">"this.style.backgroundColor = 'white'"</span>    onmouseout<span class="token operator">=</span><span class="token string">"this.style.backgroundColor = '#F5FAFE';"</span><span class="token operator">></span>
                                <span class="token operator">&lt;</span>td style<span class="token operator">=</span><span class="token string">"CURSOR: hand; HEIGHT: 22px"</span> align<span class="token operator">=</span><span class="token string">"center"</span>    width<span class="token operator">=</span><span class="token string">"18%"</span><span class="token operator">></span>$<span class="token punctuation">{</span>num<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                                <span class="token operator">&lt;</span>td style<span class="token operator">=</span><span class="token string">"CURSOR: hand; HEIGHT: 22px"</span> align<span class="token operator">=</span><span class="token string">"center"</span>    width<span class="token operator">=</span><span class="token string">"17%"</span><span class="token operator">></span><span class="token operator">&lt;</span>img width<span class="token operator">=</span><span class="token string">"40"</span> height<span class="token operator">=</span><span class="token string">"45"</span> src<span class="token operator">=</span><span class="token string">"${p.pimage}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                                <span class="token operator">&lt;</span>td style<span class="token operator">=</span><span class="token string">"CURSOR: hand; HEIGHT: 22px"</span> align<span class="token operator">=</span><span class="token string">"center"</span>    width<span class="token operator">=</span><span class="token string">"17%"</span><span class="token operator">></span>$<span class="token punctuation">{</span>p<span class="token punctuation">.</span>pname<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                                <span class="token operator">&lt;</span>td style<span class="token operator">=</span><span class="token string">"CURSOR: hand; HEIGHT: 22px"</span> align<span class="token operator">=</span><span class="token string">"center"</span>    width<span class="token operator">=</span><span class="token string">"17%"</span><span class="token operator">></span>$<span class="token punctuation">{</span>p<span class="token punctuation">.</span>shop_price<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                                <span class="token operator">&lt;</span>td style<span class="token operator">=</span><span class="token string">"CURSOR: hand; HEIGHT: 22px"</span> align<span class="token operator">=</span><span class="token string">"center"</span>    width<span class="token operator">=</span><span class="token string">"17%"</span><span class="token operator">></span>$<span class="token punctuation">{</span>p<span class="token punctuation">.</span>is_hot<span class="token operator">==</span><span class="token number">1</span><span class="token operator">?</span><span class="token string">"是"</span><span class="token operator">:</span><span class="token string">"否"</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                                <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> style<span class="token operator">=</span><span class="token string">"HEIGHT: 22px"</span><span class="token operator">></span>
                                    <span class="token operator">&lt;</span>a    href<span class="token operator">=</span><span class="token string">"${ pageContext.request.contextPath }/admin/product/edit.jsp"</span><span class="token operator">></span>
                                        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/images/i_edit.gif"</span>    border<span class="token operator">=</span><span class="token string">"0"</span> style<span class="token operator">=</span><span class="token string">"CURSOR: hand"</span><span class="token operator">></span>
                                   <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
                                 $  <span class="token punctuation">{</span>p<span class="token punctuation">.</span>pid<span class="token punctuation">}</span>  获取 p对象中 pid <span class="token punctuation">,</span>作为删除参数
                                 <span class="token operator">--</span><span class="token operator">></span>
                                <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> style<span class="token operator">=</span><span class="token string">"HEIGHT: 22px"</span><span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span><span class="token operator">></span> <span class="token operator">&lt;</span>img
                                        src<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/images/i_del.gif"</span>
                                        width<span class="token operator">=</span><span class="token string">"16"</span> height<span class="token operator">=</span><span class="token string">"16"</span> border<span class="token operator">=</span><span class="token string">"0"</span> style<span class="token operator">=</span><span class="token string">"CURSOR: hand"</span> onclick<span class="token operator">=</span><span class="token string">"deleteProduct(${p.pid})"</span><span class="token operator">></span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>forEach<span class="token operator">></span>
</code></pre>
<h2 id="1-2-后台商品删除"><a href="#1-2-后台商品删除" class="headerlink" title="1.2 后台商品删除"></a>1.2 后台商品删除</h2><h3 id="Dao-1"><a href="#Dao-1" class="headerlink" title="Dao"></a>Dao</h3><pre class=" language-java"><code class="language-java">
<span class="token comment" spellcheck="true">/*
     删除商品 , 通过 pid 删除商品信息
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span>  <span class="token function">deleteProductByPid</span><span class="token punctuation">(</span>String pid<span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// sql</span>
        String sql <span class="token operator">=</span> <span class="token string">"DELETE FROM product WHERE pid = ? "</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 查询</span>
        <span class="token keyword">return</span>  qr<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> pid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="Service-1"><a href="#Service-1" class="headerlink" title="Service"></a>Service</h3><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/*
    删除商品 , 通过 pid 删除商品信息
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteProductByPid</span><span class="token punctuation">(</span>String pid<span class="token punctuation">)</span>  <span class="token punctuation">{</span>


        <span class="token comment" spellcheck="true">// 调用 dao 删除方法</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> pdao<span class="token punctuation">.</span><span class="token function">deleteProductByPid</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 判断删除结果 为1 成功</span>
            <span class="token keyword">return</span>  i<span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="Servlet-1"><a href="#Servlet-1" class="headerlink" title="Servlet"></a>Servlet</h3><pre class=" language-java"><code class="language-java">
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/delete"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeleteServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// 获取参数 pid</span>
        String pid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 创建 service</span>
        ProductService ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 调用 删除方法</span>
        <span class="token keyword">boolean</span> b <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">deleteProductByPid</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 页面展示-- 查询所有商品 ,否则会无信息显示</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/adminall"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="JSP-1"><a href="#JSP-1" class="headerlink" title="JSP"></a>JSP</h3><pre class=" language-jsp"><code class="language-jsp">            function deleteProduct(pid){
                // 弹出确认框
                var b = window.confirm("是否真的删除该商品?");
                if(b){

                   window.location.href = "${pageContext.request.contextPath}/delete?pid="+pid;
                }

            }</code></pre>
<h2 id="1-3-后台商品条件查询"><a href="#1-3-后台商品条件查询" class="headerlink" title="1.3 后台商品条件查询"></a>1.3 后台商品条件查询</h2><p>设置条件 : 关键字 / 最低价/ 最高价 / 是否热卖 ,组合条件.</p>
<ol>
<li>拼接sql </li>
<li>设置JavaBean对象 ,封装查询条件.</li>
</ol>
<h3 id="Dao层"><a href="#Dao层" class="headerlink" title="Dao层"></a>Dao层</h3><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/*
     条件查询商品 , 通过 查询条件  ,返回符合条件的对象
     */</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Product<span class="token operator">></span>  <span class="token function">queryConditionProduct</span><span class="token punctuation">(</span>QueryCondition qc <span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// sql -- SELECT * FROM product WHERE is_hot = 1 and shop_price > 1000</span>
        StringBuilder sql <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span> <span class="token string">"SELECT * FROM product WHERE 1=1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">/*
         根据用户 选择  ,拼接 sql 语句, 选择的条件 需要拼接 , 未选择的条件, 不再拼接
         */</span>

        String keyword <span class="token operator">=</span> qc<span class="token punctuation">.</span><span class="token function">getKeyword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String min_price <span class="token operator">=</span> qc<span class="token punctuation">.</span><span class="token function">getMin_price</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String max_price <span class="token operator">=</span> qc<span class="token punctuation">.</span><span class="token function">getMax_price</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String is_hot <span class="token operator">=</span> qc<span class="token punctuation">.</span><span class="token function">getIs_hot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 判断 关键字</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>keyword<span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>keyword<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//拼接</span>
            sql<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and pname like '%"</span><span class="token operator">+</span>keyword<span class="token operator">+</span><span class="token string">"%'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// 判断 min_price</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>min_price<span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>min_price<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//拼接</span>
            sql<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and shop_price >= "</span> <span class="token operator">+</span> min_price<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token comment" spellcheck="true">// 判断 max_price</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>max_price<span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>max_price<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//拼接</span>
            sql<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and shop_price &lt;= "</span> <span class="token operator">+</span> max_price<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// 判断 is_hot</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>is_hot<span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>is_hot<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//拼接</span>
            sql<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and is_hot = "</span> <span class="token operator">+</span> is_hot<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token comment" spellcheck="true">// 查询</span>
        List<span class="token operator">&lt;</span>Product<span class="token operator">></span> products <span class="token operator">=</span> qr<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>Product<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span>  products<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>




</code></pre>
<h3 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h3><pre class=" language-java"><code class="language-java"> <span class="token comment" spellcheck="true">/*
        条件查询商品 , 通过 查询条件  ,返回符合条件的对象
        */</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Product<span class="token operator">></span>  <span class="token function">queryConditionProduct</span><span class="token punctuation">(</span>QueryCondition qc <span class="token punctuation">)</span>  <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            List<span class="token operator">&lt;</span>Product<span class="token operator">></span> products <span class="token operator">=</span> pdao<span class="token punctuation">.</span><span class="token function">queryConditionProduct</span><span class="token punctuation">(</span>qc<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> products<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> null<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="Servlet层"><a href="#Servlet层" class="headerlink" title="Servlet层"></a>Servlet层</h3><pre class=" language-java"><code class="language-java">
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/condition"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConditionServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// 封装 查询对象</span>
        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> map <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QueryCondition qc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// 封装后 , qc 已经有值.</span>
            BeanUtils<span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span>qc <span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// 创建 Service</span>
        ProductService ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 调用查询方法</span>
        List<span class="token operator">&lt;</span>Product<span class="token operator">></span> products <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">queryConditionProduct</span><span class="token punctuation">(</span>qc<span class="token punctuation">)</span><span class="token punctuation">;</span>

        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span> <span class="token punctuation">,</span> products<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 返回结果 ,  显示页面</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/admin/product/list.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="domian-1"><a href="#domian-1" class="headerlink" title="domian"></a>domian</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> String  keyWord<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 关键字 , 模糊查询</span>
    <span class="token keyword">private</span> String  min_price<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 最低价格</span>
    <span class="token keyword">private</span> String  max_price<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 最高价格</span>
    <span class="token keyword">private</span> String  is_hot<span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// 是否热卖</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>   </code></pre>
<h3 id="JSP-2"><a href="#JSP-2" class="headerlink" title="JSP"></a>JSP</h3><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">"Form1"</span> name<span class="token operator">=</span><span class="token string">"Form1"</span> action<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/condition"</span>        method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>tr   style<span class="token operator">=</span><span class="token string">"FONT-WEIGHT: bold; FONT-SIZE: 12pt; HEIGHT: 25px; BACKGROUND-COLOR: #afd1f3"</span><span class="token operator">></span>

            <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> width<span class="token operator">=</span><span class="token string">"18%"</span><span class="token operator">></span>
                关键字 <span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"keyword"</span> id<span class="token operator">=</span><span class="token string">"i1"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
            <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> width<span class="token operator">=</span><span class="token string">"18%"</span><span class="token operator">></span>
                最低价 <span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"min_price"</span> id<span class="token operator">=</span><span class="token string">"i2"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
            <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> width<span class="token operator">=</span><span class="token string">"18%"</span><span class="token operator">></span>
                最高价 <span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"max_price"</span> id<span class="token operator">=</span><span class="token string">"i3"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
            <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> width<span class="token operator">=</span><span class="token string">"18%"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">"is_hot"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span>不限<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>是<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">></span>否<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>

            <span class="token operator">&lt;</span>td align<span class="token operator">=</span><span class="token string">"center"</span> width<span class="token operator">=</span><span class="token string">"18%"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"条件查询"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span></code></pre>
<h2 id="前台商品分页查询"><a href="#前台商品分页查询" class="headerlink" title="前台商品分页查询"></a>前台商品分页查询</h2><p>在前台分页显示商品信息 , 每页显示12条 </p>
<p>分析 :</p>
<pre class=" language-java"><code class="language-java">LIMIT  关键字 <span class="token punctuation">,</span> 做条目数量限制

SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">;</span># 从第一条开始 <span class="token punctuation">,</span> 查<span class="token number">10</span>条 
SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span> # 从第一条开始 <span class="token punctuation">,</span> 查<span class="token number">5</span>条 
SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span> # 从第六条开始 <span class="token punctuation">,</span> 查<span class="token number">5</span>条 

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>

#在前台<span class="token punctuation">.</span>每页显示<span class="token number">12</span>条  

SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">;</span>  # 第一页 <span class="token punctuation">,</span> 显示<span class="token number">12</span>条
SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">;</span> # 第二页 <span class="token punctuation">,</span> 显示<span class="token number">12</span>条
SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">;</span> # 第三页 <span class="token punctuation">,</span> 显示<span class="token number">12</span>条
SELECT <span class="token operator">*</span> FROM product LIMIT <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">;</span> # 第四页 <span class="token punctuation">,</span> 显示n条

SELECT <span class="token operator">*</span> FROM product <span class="token function">LIMIT</span> <span class="token punctuation">(</span>当前页<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">12</span><span class="token punctuation">(</span>每页个数<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">;</span>  总共显示的条数
<span class="token comment" spellcheck="true">/*

分页 : 
商品数量 : totalNum 
每页个数 : 12
总页数   : Math.ceil( 1.0 * totalNum / 12) 
当前页   : 用户页面点击, 传递到dao ,执行sql  
查询数据结果 : List&lt;Product>
*/</span>


</code></pre>
<h3 id="Dao层-1"><a href="#Dao层-1" class="headerlink" title="Dao层"></a>Dao层</h3><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Product<span class="token operator">></span> <span class="token function">queryPage</span><span class="token punctuation">(</span><span class="token keyword">int</span>  pageNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>

        <span class="token comment" spellcheck="true">// 分页查询</span>
        <span class="token comment" spellcheck="true">// SELECT * FROM product LIMIT 0, 12;  # 第一页 , 显示12条</span>
        <span class="token comment" spellcheck="true">// SELECT * FROM product LIMIT (当前页-1) * 12, 12; # 第四页 , 显示n条</span>
        <span class="token comment" spellcheck="true">//</span>
        String sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM product LIMIT ?, 12 "</span><span class="token punctuation">;</span>
        List<span class="token operator">&lt;</span>Product<span class="token operator">></span> query <span class="token operator">=</span> qr<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>Product<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>pageNum <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> query<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Long <span class="token function">queryTotalNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>
        String sql <span class="token operator">=</span> <span class="token string">"SELECT count(*) FROM product"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//  Integer 不可以 , 否则报错 ClassCastException .</span>
        Long num <span class="token operator">=</span> <span class="token punctuation">(</span>Long<span class="token punctuation">)</span>qr<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> num <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="domain"><a href="#domain" class="headerlink" title="domain"></a>domain</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageBean</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span>  String  everyNum <span class="token operator">=</span> <span class="token string">"12"</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 规定 是 每页 12个 .</span>
    <span class="token keyword">private</span>  String currentPage <span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 当前页</span>
    <span class="token keyword">private</span>  <span class="token keyword">int</span> totalCount<span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 商品的总数量 .   47条</span>
    <span class="token keyword">private</span>  <span class="token keyword">int</span> totalPage <span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 总页数   通过 totalCount /  everyNum -->向上取整 计算.  47/12 --> 4</span>
    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>Product<span class="token operator">></span> productList<span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="Service层-1"><a href="#Service层-1" class="headerlink" title="Service层"></a>Service层</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductService</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> PageBean <span class="token function">pageQueryProduct</span><span class="token punctuation">(</span>String currentPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>

            <span class="token comment" spellcheck="true">// 创建 PageBean 对象</span>
            PageBean pageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 保存当前页</span>
            pageBean<span class="token punctuation">.</span><span class="token function">setCurrentPage</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">int</span> totalPage <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 保存商品总数量</span>

            Object o <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">queryTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> count <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// 计算 总页数</span>
            totalPage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>count <span class="token operator">/</span> <span class="token number">12.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            pageBean<span class="token punctuation">.</span><span class="token function">setTotalCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 保存总页数</span>
            pageBean<span class="token punctuation">.</span><span class="token function">setTotalPage</span><span class="token punctuation">(</span>totalPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 保存 商品信息</span>
            List<span class="token operator">&lt;</span>Product<span class="token operator">></span> products <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">pageQueryProduct</span><span class="token punctuation">(</span>pageBean<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pageBean<span class="token punctuation">.</span><span class="token function">setProductList</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> pageBean<span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> null<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="Servlet层-1"><a href="#Servlet层-1" class="headerlink" title="Servlet层"></a>Servlet层</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/page"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 1. 获取 提交参数 -- currentPage</span>
        String currentPage <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"currentPage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 2. 创建Service</span>
        ProductService productService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 3. 通过service分页查询</span>
        PageBean pageBean <span class="token operator">=</span> productService<span class="token punctuation">.</span><span class="token function">pageQueryProduct</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 4. 将结果返回到用户</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"pageBean"</span> <span class="token punctuation">,</span> pageBean<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 5. 转发页面</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/product_list.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="jsp"><a href="#jsp" class="headerlink" title="jsp"></a>jsp</h3><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>分页 <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"width: 380px; margin: 0 auto; margin-top: 50px;"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"pagination"</span> style<span class="token operator">=</span><span class="token string">"text-align: center; margin-top: 10px;"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${pageBean.currentPage == 1}"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 不能点击 <span class="token operator">--</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"disabled"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"Previous"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>span aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&amp;</span>laquo<span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>

        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${pageBean.currentPage != 1}"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 可以点击 <span class="token operator">--</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>li <span class="token operator">></span>

                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/page?currentPage=${pageBean.currentPage-1}"</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"Previous"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>span aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&amp;</span>laquo<span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>

        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span><span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"active"</span><span class="token operator">></span><span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>c<span class="token operator">:</span>forEach var<span class="token operator">=</span><span class="token string">"page"</span> begin<span class="token operator">=</span><span class="token string">"1"</span> end<span class="token operator">=</span><span class="token string">"${pageBean.totalPage}"</span> step<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span><span class="token operator">/</span>web13<span class="token operator">/</span>page<span class="token operator">?</span>currentPage<span class="token operator">=</span><span class="token number">4</span><span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${page==pageBean.currentPage}"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"active"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/page?currentPage=${page}"</span><span class="token operator">></span>$<span class="token punctuation">{</span>page<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${page!=pageBean.currentPage}"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>li<span class="token operator">></span>
                    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/page?currentPage=${page}"</span><span class="token operator">></span>$<span class="token punctuation">{</span>page<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>forEach<span class="token operator">></span>


        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${pageBean.currentPage == pageBean.totalPage}"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"disabled"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"Next"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>span aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&amp;</span>raquo<span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>

        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${pageBean.currentPage != pageBean.totalPage}"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>li<span class="token operator">></span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/page?currentPage=${pageBean.currentPage+1}"</span> aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">"Next"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>span aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span><span class="token operator">&amp;</span>raquo<span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 分页结束 <span class="token operator">--</span><span class="token operator">></span></code></pre>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day41Filter-Listener-BaseServlet" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/12/day41filter-listener-baseservlet/">day41Filter-Listener-BaseServlet</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/12/day41filter-listener-baseservlet/" class="article-date">
  <time datetime="2020-04-12T09:36:46.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day41Filter-amp-Listener-amp-BaseServlet"><a href="#day41Filter-amp-Listener-amp-BaseServlet" class="headerlink" title="day41Filter &amp; Listener &amp; BaseServlet"></a>day41Filter &amp; Listener &amp; BaseServlet</h1><h2 id="1-1-过滤器Filter"><a href="#1-1-过滤器Filter" class="headerlink" title="1.1 过滤器Filter"></a>1.1 过滤器Filter</h2><h3 id="1-1-1-Filter简介"><a href="#1-1-1-Filter简介" class="headerlink" title="1.1.1 Filter简介"></a>1.1.1 Filter简介</h3><p>filter是对客户端访问资源的过滤，符合条件放行，不符合条件不放行</p>
<p><img src="/2020/04/12/day41filter-listener-baseservlet/1.png" alt></p>
<h3 id="1-1-2-快速入门"><a href="#1-1-2-快速入门" class="headerlink" title="1.1.2 快速入门"></a>1.1.2 快速入门</h3><h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><ol>
<li>编写一个过滤器的类实现Filter接口</li>
<li>实现接口中尚未实现的方法(着重实现doFilter方法)</li>
<li>在web.xml中（注解）进行配置(主要是配置要对哪些资源进行过滤)</li>
<li>在doFilter方法中书写过滤任务</li>
<li>FilterChain.doFilter方法放行</li>
</ol>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p>过滤器doFilter方法默认拦截请求，如果需要经过过滤器之后，可以继续访问资源，要使用filterChain放行。</p>
<p>代码实现</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">//  初始化方法.</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>FilterConfig filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyFilter.init"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest servletRequest<span class="token punctuation">,</span> ServletResponse servletResponse<span class="token punctuation">,</span> FilterChain filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyFilter.doFilter  进入过滤器 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 3. 放行 .</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span> servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// 销毁方法</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyFilter.destroy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="web-xml配置"><a href="#web-xml配置" class="headerlink" title="web.xml配置"></a>web.xml配置</h4><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span>filter<span class="token operator">></span>
    <span class="token operator">&lt;</span>filter‐name<span class="token operator">></span>MyFilter1<span class="token operator">&lt;</span><span class="token operator">/</span>filter‐name<span class="token operator">></span>
    <span class="token operator">&lt;</span>filter‐<span class="token keyword">class</span><span class="token operator">></span>com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>MyFilter1<span class="token operator">&lt;</span><span class="token operator">/</span>filter‐<span class="token keyword">class</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">></span>
<span class="token operator">&lt;</span>filter‐mapping<span class="token operator">></span>
    <span class="token operator">&lt;</span>filter‐name<span class="token operator">></span>MyFilter1<span class="token operator">&lt;</span><span class="token operator">/</span>filter‐name<span class="token operator">></span>
    <span class="token operator">&lt;</span>url‐pattern<span class="token operator">></span><span class="token operator">/</span><span class="token operator">*</span><span class="token operator">&lt;</span><span class="token operator">/</span>url‐pattern<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>filter‐mapping<span class="token operator">></span></code></pre>
<h4 id="注解配置"><a href="#注解配置" class="headerlink" title="注解配置"></a>注解配置</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span></code></pre>
<h3 id="1-1-3-过滤器的执行流程"><a href="#1-1-3-过滤器的执行流程" class="headerlink" title="1.1.3 过滤器的执行流程"></a>1.1.3 过滤器的执行流程</h3><h4 id="图解过滤器的执行流程"><a href="#图解过滤器的执行流程" class="headerlink" title="图解过滤器的执行流程"></a>图解过滤器的执行流程</h4><p><img src="/2020/04/12/day41filter-listener-baseservlet/2.png" alt></p>
<h3 id="1-1-4-Filter的API详解"><a href="#1-1-4-Filter的API详解" class="headerlink" title="1.1.4 Filter的API详解"></a>1.1.4 Filter的API详解</h3><h4 id="filter生命周期及其与生命周期相关的方法"><a href="#filter生命周期及其与生命周期相关的方法" class="headerlink" title="filter生命周期及其与生命周期相关的方法"></a>filter生命周期及其与生命周期相关的方法</h4><p>Filter接口有三个方法，并且这个三个都是与Filter的生命相关的方法</p>
<ol>
<li><p>init(Filterconfig) ：代表filter对象初始化方法 filter对象创建时执行</p>
</li>
<li><p>doFilter(ServletRequest,ServletResponse,FilterCha) ：代表filter执行过滤的<br>核心方法，如果某资源在已经被配置到这个filter进行过滤的话，那么每次访问这个资源都会执行</p>
</li>
<li><p>destory() ：代表是filter销毁方法 当filter对象销毁时执行该方法</p>
</li>
</ol>
<p>Filter对象的生命周期:</p>
<ol>
<li>Filter何时创建：服务器启动时就创建该filter对象</li>
<li>Filter何时执行过滤：每当一个请求的路径是满足过滤器的配置路径，那么就会执行一次过滤器的doFilter方法</li>
<li>Filter何时销毁：服务器关闭时filter销毁</li>
</ol>
<h4 id="Filter的API详解"><a href="#Filter的API详解" class="headerlink" title="Filter的API详解"></a>Filter的API详解</h4><ol>
<li><p>init(FilterConfig) :Filter对象创建候，立即执行init方法参数：FilterConfig是Filter的配置对象，该对象可以获得ServletContext对象</p>
</li>
<li><p>destory() :filter对象销毁前执行destory方法</p>
</li>
<li><p>doFilter(ServletRequest,ServletResponse,FilterChain) :filter执行过滤的核心方法，如果某资源在已经被配置到这个filter进行过滤的话，那么每次访问这个资源都会执行doFilter方法</p>
</li>
</ol>
<p>参数：</p>
<ul>
<li><p>ServletRequest / ServletResponse：每次在执行doFilter方法时 web容器负责创建一个request和一个response对象作为doFilter的参数传递进来。该request与该response就是在访问目标资源的service方法时的request和response。</p>
</li>
<li><p>FilterChain：过滤器链对象，通过该对象的doFilter方法可以放行该请求</p>
</li>
</ul>
<p><img src="/2020/04/12/day41filter-listener-baseservlet/3.png" alt></p>
<h3 id="1-1-5-Filter配置"><a href="#1-1-5-Filter配置" class="headerlink" title="1.1.5 Filter配置"></a>1.1.5 Filter配置</h3><h4 id="映射路径"><a href="#映射路径" class="headerlink" title="映射路径"></a>映射路径</h4><p>xml方式配置：</p>
<p>注解配置：</p>
<p>前面已经介绍过了</p>
<p>不管是注解配置还是xml配置，配置虚拟路径的语法都是一致的，如下：</p>
<ol>
<li><p>完全匹配</p>
<p> 语法：/sertvle1</p>
<p> 只有访问的地址是servlet1时，才执行该过滤器</p>
</li>
<li><p>目录匹配</p>
<p> 语法：/aaa/bbb/* ，经常使用</p>
<p> 当访问的目标资源 的地址是/aaa/bbb/任何资源 都执行该过滤器</p>
</li>
<li><p>扩展名匹配</p>
<p> 语法：*.abc  *.jsp</p>
<p> 当访问的目标资源的扩展名是 abc、jsp时 才执行该过滤器</p>
</li>
</ol>
<h4 id="拦截方式"><a href="#拦截方式" class="headerlink" title="拦截方式"></a>拦截方式</h4><p>有了上面学习的映射路径，我们可以控制过滤器过滤指定的内容，但是我们在访问资源的时候，并不是每次都是之间访问，有时是以转发的方式访问的，这就需要我们要让过滤器可以区分不同的访问资源的方式，有不同的拦截方式。</p>
<p>dispatcher：访问的方式</p>
<ul>
<li><p>REQUEST：默认值，代表直接访问某个资源时执行filter</p>
</li>
<li><p>FORWARD：转发时才执行filter</p>
</li>
</ul>
<h3 id="1-1-6-过滤器链"><a href="#1-1-6-过滤器链" class="headerlink" title="1.1.6 过滤器链"></a>1.1.6 过滤器链</h3><h4 id="什么是过滤器链"><a href="#什么是过滤器链" class="headerlink" title="什么是过滤器链"></a>什么是过滤器链</h4><p>我们java代码中，有时需要对同一个请求，进行多次不同业务的过滤，所以我们java代码中需要多个过滤器。只有所有的过滤器都对请求进行了放行，请求才能访问到目标资源，只要多个过滤器中只有一个过滤器不放行请求，那么这个请求都不能够访问到目标资源。多个过滤器组成的一个整体我们称为过滤器链。而且，过滤器链中的过滤器是一个一个的执行的，一个过滤器执行完毕之后，会执行下一个过滤器，后面没有过滤器了，才会访问到目标资源。只要其中一个过滤器没有放行，那么这个过滤器后面的过滤器也都不会执行了</p>
<p>提示：</p>
<ol>
<li><p>web.xml配置的Filter的执行顺序取决于filter-mapping的顺序</p>
</li>
<li><p>注解配置的filter的执行顺序取决于filter的类名称的字母排序</p>
</li>
</ol>
<h3 id="1-1-7-过滤器的应用场景"><a href="#1-1-7-过滤器的应用场景" class="headerlink" title="1.1.7 过滤器的应用场景"></a>1.1.7 过滤器的应用场景</h3><ol>
<li><p>处理全站中文乱码</p>
</li>
<li><p>登录权限检查</p>
</li>
</ol>
<h2 id="1-2-监听器Listener"><a href="#1-2-监听器Listener" class="headerlink" title="1.2 监听器Listener"></a>1.2 监听器Listener</h2><h3 id="1-2-1-什么是监听器"><a href="#1-2-1-什么是监听器" class="headerlink" title="1.2.1 什么是监听器"></a>1.2.1 什么是监听器</h3><p>监听器就是监听某个对象的的状态变化的组件 监听器的相关概念： </p>
<p>事件源：被监听的对象 —- 主要三个域对象request session servletContext </p>
<p>监听器：监听事件源对象 事件源对象的状态的变化都会触发监听器 </p>
<p>响应行为：监听器监听到事件源的状态变化时 所涉及的功能代码 —- 程序员编写代码</p>
<h3 id="1-2-2-监听器有哪些"><a href="#1-2-2-监听器有哪些" class="headerlink" title="1.2.2 监听器有哪些"></a>1.2.2 监听器有哪些</h3><ol>
<li><p>第一维度：按照被监听的对象划分：ServletRequest域 HttpSession ServletContext域 </p>
</li>
<li><p>第二维度：安装监听的内容分：监听域对象的创建与销毁的监听域对象的属性变化的</p>
</li>
</ol>
<p>对应的接口：</p>
<p><img src="/2020/04/12/day41filter-listener-baseservlet/4.png" alt></p>
<p>代码实现：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span><span class="token punctuation">,</span>  HttpSessionListener<span class="token punctuation">,</span> ServletRequestAttributeListener <span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">// Public constructor is required by servlet spec</span>
    <span class="token keyword">public</span> <span class="token function">MyListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// -------------------------------------------------------</span>
    <span class="token comment" spellcheck="true">// ServletContextListener implementation</span>
    <span class="token comment" spellcheck="true">// -------------------------------------------------------</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span>ServletContextEvent sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">/*
          此方法 ,在 ServletContext对象 ,初始化时调用执行.
      */</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyListener.contextInitialized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"项目启动了,初始化信息..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span>ServletContextEvent sce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">/* 此方法 ,在 ServletContext对象 ,销毁时调用执行.
       */</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyListener.contextDestroyed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"项目关闭, 回收资源."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// -------------------------------------------------------</span>
    <span class="token comment" spellcheck="true">// HttpSessionListener implementation</span>
    <span class="token comment" spellcheck="true">// -------------------------------------------------------</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionCreated</span><span class="token punctuation">(</span>HttpSessionEvent se<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyListener.sessionCreated"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"来客了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDestroyed</span><span class="token punctuation">(</span>HttpSessionEvent se<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyListener.sessionDestroyed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"客走了,再来呀... 时间延迟..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeAdded</span><span class="token punctuation">(</span>ServletRequestAttributeEvent servletRequestAttributeEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeRemoved</span><span class="token punctuation">(</span>ServletRequestAttributeEvent servletRequestAttributeEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeReplaced</span><span class="token punctuation">(</span>ServletRequestAttributeEvent servletRequestAttributeEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="1-3-BaseServlet"><a href="#1-3-BaseServlet" class="headerlink" title="1.3 BaseServlet"></a>1.3 BaseServlet</h2><h3 id="1-3-1-什么是BaseServlet"><a href="#1-3-1-什么是BaseServlet" class="headerlink" title="1.3.1 什么是BaseServlet"></a>1.3.1 什么是BaseServlet</h3><p>为了解决Servlet类太多的问题</p>
<h3 id="1-3-2-BaseServlet的优化"><a href="#1-3-2-BaseServlet的优化" class="headerlink" title="1.3.2 BaseServlet的优化"></a>1.3.2 BaseServlet的优化</h3><h4 id="优化1"><a href="#优化1" class="headerlink" title="优化1"></a>优化1</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// localhost:8080/web14/user?method=pay&amp;name=tom&amp;money=100  --> pay方法</span>
    <span class="token comment" spellcheck="true">// localhost:8080/web14/user?method=updatePwd&amp;pwd=12345</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
         <span class="token comment" spellcheck="true">// 通过访问时, 客户端提供的参数, 分别调用不同的方法</span>
        String method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"pay"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// 调用pay方法</span>
            <span class="token function">pay</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"updatePwd"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">// 调用 updatePwd</span>
            <span class="token function">updatePwd</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span>HttpServletRequest req <span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"支付 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updatePwd</span><span class="token punctuation">(</span>HttpServletRequest req <span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"改密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="优化2"><a href="#优化2" class="headerlink" title="优化2"></a>优化2</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/user2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
         <span class="token comment" spellcheck="true">// 通过访问时, 客户端提供的参数, 分别调用不同的方法</span>
        String methodName <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 反射技术 ,替代 判断的写法 .</span>

        <span class="token comment" spellcheck="true">// 1. 获取本类的类对象</span>
        Class  <span class="token class-name">clz</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 2. 解析 Method</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//  暴力获取方法  , 非Public权限的方法 , 都必须这样才能获取到.</span>
            Method method <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> HttpServletRequest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> HttpServletResponse<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 3. 执行此方法</span>
            method<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 设置访问权限.</span>

            method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span>request <span class="token punctuation">,</span> response <span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span>HttpServletRequest req <span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"支付 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updatePwd</span><span class="token punctuation">(</span>HttpServletRequest req <span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"改密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="优化3"><a href="#优化3" class="headerlink" title="优化3"></a>优化3</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaseServlet</span>  <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 通过访问时, 客户端提供的参数, 分别调用不同的方法</span>
        String methodName <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 反射技术 ,替代 判断的写法 .</span>

        <span class="token comment" spellcheck="true">// 1. 获取本类的类对象</span>
        Class  <span class="token class-name">clz</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 2. 解析 Method</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//  暴力获取方法  , 非Public权限的方法 , 都必须这样才能获取到.</span>
            Method method <span class="token operator">=</span> clz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> HttpServletRequest<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> HttpServletResponse<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// 3. 执行此方法</span>
            method<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 设置访问权限.</span>

            method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span>request <span class="token punctuation">,</span> response <span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/user3"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServlet3</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>


    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">pay</span><span class="token punctuation">(</span>HttpServletRequest req <span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"支付 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updatePwd</span><span class="token punctuation">(</span>HttpServletRequest req <span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"改密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>优化图解<br><img src="/2020/04/12/day41filter-listener-baseservlet/5.jpg" alt></p>
<p>优化思路：抽象，反射，继承</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day40el-jstl" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/06/day40el-jstl/">day40el-jstl</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/06/day40el-jstl/" class="article-date">
  <time datetime="2020-04-06T10:02:30.000Z" itemprop="datePublished">2020-04-06</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day40el-jstl"><a href="#day40el-jstl" class="headerlink" title="day40el-jstl"></a>day40el-jstl</h1><h2 id="1-1-EL表达式"><a href="#1-1-EL表达式" class="headerlink" title="1.1 EL表达式"></a>1.1 EL表达式</h2><h3 id="1-1-1-EL表达式的基本概述"><a href="#1-1-1-EL表达式的基本概述" class="headerlink" title="1.1.1 EL表达式的基本概述"></a>1.1.1 EL表达式的基本概述</h3><p>EL（Express Lanuage）表达式可以嵌入在jsp页面内部，减少jsp脚本的编写，EL 出现的目的是要替代jsp页面中输出脚本的编写。</p>
<h3 id="1-1-2-EL表达式的格式和作用"><a href="#1-1-2-EL表达式的格式和作用" class="headerlink" title="1.1.2 EL表达式的格式和作用"></a>1.1.2 EL表达式的格式和作用</h3><p>EL表达式的格式：${EL表达式内容}</p>
<p>EL表达式的作用：</p>
<ol>
<li>从域对象中查找指定的数据。</li>
<li>内置对象使用</li>
<li>执行运算符</li>
</ol>
<h3 id="1-1-3-EL表达式的基本使用"><a href="#1-1-3-EL表达式的基本使用" class="headerlink" title="1.1.3 EL表达式的基本使用"></a>1.1.3 EL表达式的基本使用</h3><h4 id="EL表达式作用一：从域中取出数据"><a href="#EL表达式作用一：从域中取出数据" class="headerlink" title="EL表达式作用一：从域中取出数据"></a>EL表达式作用一：从域中取出数据</h4><ol>
<li>EL获得request域中的值：${requestScope.key};</li>
<li>EL获得session域中的值：${sessionScope.key};</li>
<li>EL获得application域中的值：${applicatioScope.key};</li>
<li>EL从四个域中获得某个值${key};</li>
</ol>
<p>同样是依次从pageContext域，request域，session域，application域中 获取属性，在某个域中获取后将不在向后寻找(从最小的找起)</p>
<ol>
<li><p>EL获得普通数据</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
 <span class="token operator">&lt;</span>title<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span>div<span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 域对象获取值  <span class="token operator">--</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%=</span>application<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"sc_key"</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%=</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"ss_key"</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%=</span>request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"req_key"</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token operator">></span>

 <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  el 的取值方式 <span class="token operator">--</span><span class="token operator">></span>
 $<span class="token punctuation">{</span>applicationScope<span class="token punctuation">.</span>sc_key<span class="token punctuation">}</span>
 $<span class="token punctuation">{</span>sessionScope<span class="token punctuation">.</span>ss_key<span class="token punctuation">}</span>
 $<span class="token punctuation">{</span>requestScope<span class="token punctuation">.</span>req_key<span class="token punctuation">}</span>

 <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>

 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  el 的简化方式 <span class="token punctuation">,</span>只写key <span class="token punctuation">,</span>没有对象 <span class="token operator">--</span><span class="token operator">></span>
 $<span class="token punctuation">{</span>sc_key<span class="token punctuation">}</span>
 $<span class="token punctuation">{</span>ss_key<span class="token punctuation">}</span>
 $<span class="token punctuation">{</span>req_key<span class="token punctuation">}</span>

 <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
</li>
<li><p>EL获得javaBean对象的值</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF‐8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
 <span class="token operator">&lt;</span>title<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%</span>‐‐ 存储User实体数据 ‐‐<span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%</span>
     User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span>h1<span class="token operator">></span>取出User的数据<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
 $<span class="token punctuation">{</span>user<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>user<span class="token punctuation">.</span>age<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
</li>
<li><p>EL获得List<String>的值<br>```java<br>&lt;%@ page contentType=”text/html;charset=UTF‐8” language=”java” %&gt;</String></p>
<html>
<head>
 <title>Title</title>
北京市昌平区建材城西路金燕龙办公楼一层 电话：400-618-9090</head></html></li>
<li><p>EL获得List<User>的值</User></p>
</li>
<li><p>EL获得Map&lt;String,User&gt;的值</p>
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="fantasyblog" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<body>
 <%‐‐ 存储list<string>数据 ‐‐%>
 <% list<string> strList = new ArrayList<>();
     strList.add("aaa");
     strList.add("bbb");
     strList.add("ccc");
     request.setAttribute("strList",strList);
 %>
 <h1>取出strList的数据</h1>
 ${strList[0]}==${strList[1]}
</%></%‐‐></body>

```
</li>
<li><p>EL获得List<User>的值</User></p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF‐8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
 <span class="token operator">&lt;</span>title<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%</span>‐‐ 存储List<span class="token operator">&lt;</span>User<span class="token operator">></span>数据 ‐‐<span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%</span>
     List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     User user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"lucy"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
     userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
     request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"userList"</span><span class="token punctuation">,</span>userList<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span>h1<span class="token operator">></span>取出userList的数据<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
$<span class="token punctuation">{</span>userList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>userList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>    
$<span class="token punctuation">{</span>userList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>userList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>    
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
</li>
<li><p>EL获得Map&lt;String,User&gt;的值</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF‐8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
 <span class="token operator">&lt;</span>title<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%</span>‐‐ 存储Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>User<span class="token operator">></span> ‐‐<span class="token operator">%</span><span class="token operator">></span>
 <span class="token operator">&lt;</span><span class="token operator">%</span>
     Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>User<span class="token operator">></span> userMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     userMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"user1"</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
     userMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"user2"</span><span class="token punctuation">,</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
     request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"userMap"</span><span class="token punctuation">,</span>userMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span><span class="token operator">></span>
     <span class="token operator">&lt;</span>h1<span class="token operator">></span>取出userMap的数据<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
     $<span class="token punctuation">{</span>userMap<span class="token punctuation">.</span>user1<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>userMap<span class="token punctuation">.</span>user1<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
     $<span class="token punctuation">{</span>userMap<span class="token punctuation">.</span>user2<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>userMap<span class="token punctuation">.</span>user2<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
     $<span class="token punctuation">{</span>userMap<span class="token punctuation">[</span><span class="token string">'user1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>userMap<span class="token punctuation">[</span><span class="token string">'user1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
     $<span class="token punctuation">{</span>userMap<span class="token punctuation">[</span><span class="token string">'user2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>userMap<span class="token punctuation">[</span><span class="token string">'user2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
</li>
</ol>
<h3 id="1-1-4-EL的内置对象"><a href="#1-1-4-EL的内置对象" class="headerlink" title="1.1.4 EL的内置对象"></a>1.1.4 EL的内置对象</h3><p>获取JSP中域中的数据（pageScope,requestScope,sessionScope,applicationScope）</p>
<p>pageContext - WEB开发中的pageContext.</p>
<p>在Servlet中获得web应用的名称：request.getContextPath();</p>
<p>在jsp页面上获得web应用的名称：${pageContext.request.contextPath}</p>
<h3 id="1-1-5-EL执行运算符"><a href="#1-1-5-EL执行运算符" class="headerlink" title="1.1.5 EL执行运算符"></a>1.1.5 EL执行运算符</h3><ol>
<li>算数运算符 + - * / %</li>
<li>逻辑运算符 &amp;&amp; || ！</li>
<li>比较运算符 &gt; &lt; &gt;= &lt;=</li>
<li>Null运算符 empty (指向null和size=0都是null)</li>
<li>三元运算符 ? :</li>
</ol>
<h2 id="1-2-JSTL"><a href="#1-2-JSTL" class="headerlink" title="1.2 JSTL"></a>1.2 JSTL</h2><h3 id="1-2-1-jstl标签的基本概述"><a href="#1-2-1-jstl标签的基本概述" class="headerlink" title="1.2.1 jstl标签的基本概述"></a>1.2.1 jstl标签的基本概述</h3><p>JSTL（JSP Standard Tag Library)，JSP标准标签库，可以嵌入在jsp页面中使用标签的形式完成业务逻辑等功能。jstl出现的目的同el一样也是要提到jsp页面中的脚本代码。JSTL标准标准标签库有5个子库，但随着发展，目前常使用的是他的核心库</p>
<h3 id="1-2-2-jstl标签的安装"><a href="#1-2-2-jstl标签的安装" class="headerlink" title="1.2.2 jstl标签的安装"></a>1.2.2 jstl标签的安装</h3><ol>
<li><p>导入jar包</p>
<p> javax.servlet.jsp.jstl.jar</p>
<p> jstl‐impl.jar</p>
</li>
<li><p>使用taglib指令在jsp页面导入要使用的jstl标签库</p>
<p>&lt;%@ taglib prefix=”c” uri=”<a href="http://java.sun.com/jsp/jstl/core&quot;" target="_blank" rel="noopener">http://java.sun.com/jsp/jstl/core&quot;</a> %&gt;</p>
</li>
</ol>
<h3 id="1-2-3-常用的jstl标签"><a href="#1-2-3-常用的jstl标签" class="headerlink" title="1.2.3 常用的jstl标签"></a>1.2.3 常用的jstl标签</h3><h4 id="lt-c-if-gt-标签"><a href="#lt-c-if-gt-标签" class="headerlink" title="&lt;c:if&gt;标签"></a>&lt;c:if&gt;标签</h4><p>if标签作用：</p>
<p>起到java代码的判断的作用</p>
<p>if标签属性介绍：</p>
<ol>
<li><p>test：判断是否执行标签内的内容（true——执行标签中的内容，false，不执行）。</p>
</li>
<li><p>var：用来保存test属性的结果（使用var属性给他取个名字），这个结果可以保存到指定的容器中。</p>
</li>
<li><p>scope：指定保存数据的容器。</p>
</li>
</ol>
<p>if标签演示：</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF‐8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">%</span>@ taglib prefix<span class="token operator">=</span><span class="token string">"c"</span> uri<span class="token operator">=</span><span class="token string">"http://java.sun.com/jsp/jstl/core"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${num>5}"</span><span class="token operator">></span>
        num大于<span class="token number">5</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${num&lt;=5}"</span><span class="token operator">></span>
        num小于等于<span class="token number">5</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">%</span>‐‐将<span class="token keyword">if</span>判断的结果存储到指定的域中‐‐<span class="token operator">%</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${num==100}"</span> var<span class="token operator">=</span><span class="token string">"res"</span> scope<span class="token operator">=</span><span class="token string">"request"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>h1<span class="token operator">></span>取出结果<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    $<span class="token punctuation">{</span>res<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
<h4 id="forEach标签"><a href="#forEach标签" class="headerlink" title="forEach标签"></a>forEach标签</h4><p>forEach标签作用：</p>
<p>起到java代码的for循环作用</p>
<p>forEach标签属性介绍：</p>
<ol>
<li>var：在不循环对象的时候，保存的是控制循环的变量；在循环对象的时候，保存的是被循环对象中的元素</li>
<li>items：指定要循环的对象</li>
<li>varStatus：保存了当前循环过程中的信息（循环的开始、结束、步长、次数等）</li>
<li>begin：设置循环的开始<br>end：设置循环的结束</li>
<li>step：设置步长——间隔几次循环，执行一次循环体中的内容</li>
</ol>
<p>foreach演示：</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF‐8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">%</span>@ taglib prefix<span class="token operator">=</span><span class="token string">"c"</span> uri<span class="token operator">=</span><span class="token string">"http://java.sun.com/jsp/jstl/core"</span> <span class="token operator">%</span><span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Title<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span>h1<span class="token operator">></span>模拟增强<span class="token keyword">for</span>循环<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    
    <span class="token operator">&lt;</span>c<span class="token operator">:</span>forEach items<span class="token operator">=</span><span class="token string">"${userList}"</span> var<span class="token operator">=</span><span class="token string">"user"</span><span class="token operator">></span>
        $<span class="token punctuation">{</span>user<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token operator">==</span>$<span class="token punctuation">{</span>user<span class="token punctuation">.</span>age<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>forEach<span class="token operator">></span>

    <span class="token operator">&lt;</span>h1<span class="token operator">></span>模拟普通<span class="token keyword">for</span>循环<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&lt;</span>c<span class="token operator">:</span>forEach begin<span class="token operator">=</span><span class="token string">"0"</span> end<span class="token operator">=</span><span class="token string">"${num}"</span> var<span class="token operator">=</span><span class="token string">"i"</span> step<span class="token operator">=</span><span class="token string">"10"</span><span class="token operator">></span>
        $<span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>forEach<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
<p>与java比较图解：<br><img src="/2020/04/06/day40el-jstl/1.jpg" alt></p>
<h3 id="1-3-三层架构和MVC模式"><a href="#1-3-三层架构和MVC模式" class="headerlink" title="1.3 三层架构和MVC模式"></a>1.3 三层架构和MVC模式</h3><h3 id="1-3-1-JSP开发模式"><a href="#1-3-1-JSP开发模式" class="headerlink" title="1.3.1 JSP开发模式"></a>1.3.1 JSP开发模式</h3><p>当SUN公司推出JSP后，同时也提供相应的开发模式，JavaWeb经历了JSP Model1 第一代，JSPModel2第二代，JSPModel 3 三个时期。</p>
<h4 id="JSP-Model1-第一代"><a href="#JSP-Model1-第一代" class="headerlink" title="JSP Model1 第一代"></a>JSP Model1 第一代</h4><p>JSP Model1是JavaWeb早期的模型，它适合小型Web项目，开发成本低！Model1第一代时期，服务器端只有JSP页面，所有的操作都在JSP页面中，连访问数据库的API也在JSP页面中完成。也就是说，所有的东西都在一起，对后期的维护和扩展极为不利。</p>
<p><img src="/2020/04/06/day40el-jstl/2.png" alt></p>
<h4 id="JSP-Model2-第二代"><a href="#JSP-Model2-第二代" class="headerlink" title="JSP Model2 第二代"></a>JSP Model2 第二代</h4><p>JSP Model1第二代有所改进，把业务逻辑的内容放到了JavaBean中，而JSP页面负责显示以及请求调度的工作。虽然第二代比第一代好了些，但还让JSP做了过多的工作，JSP中把视图工作和请求调度（控制器）的工作耦合在一起了。</p>
<p>JSP Model 2 Model2使用到的技术有：Servlet、JSP、JavaBean。Model2 是MVC设计模式在Java语言的具体体现。</p>
<ul>
<li>JSP：视图层，用来与用户打交道。负责接收用来的数据，以及显示数据给用户；</li>
<li>ervlet：控制层，负责找到合适的模型对象来处理业务逻辑，转发到合适的视图；</li>
<li>JavaBean：模型层，完成具体的业务工作，例如：转账等。</li>
</ul>
<p><img src="/2020/04/06/day40el-jstl/3.png" alt></p>
<h4 id="三层架构"><a href="#三层架构" class="headerlink" title="三层架构"></a>三层架构</h4><p>SP模式是理论基础，但实际开发中，我们常将服务器端程序，根据逻辑进行分层。一般比较常见的是分三层，我们称为：经典三层体系架构。三层分别是：表示层、业务逻辑层、数据访问层。</p>
<ul>
<li>表示层：又称为 web层，与浏览器进行数据交互的。</li>
<li>业务逻辑层：又称为service层，专门用于处理业务数据的。</li>
<li>数据访问层：又称为dao层，与数据库进行数据交换的。将数据库的一条记录与JavaBean进行对应。</li>
</ul>
<p><img src="/2020/04/06/day40el-jstl/4.png" alt></p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-day39Cookie-Session" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/05/day39cookie-session/">day39Cookie-Session</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/04/05/day39cookie-session/" class="article-date">
  <time datetime="2020-04-05T04:47:38.000Z" itemprop="datePublished">2020-04-05</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day39Cookie-Session"><a href="#day39Cookie-Session" class="headerlink" title="day39Cookie-Session"></a>day39Cookie-Session</h1><h2 id="1-1-Cookie"><a href="#1-1-Cookie" class="headerlink" title="1.1 Cookie"></a>1.1 Cookie</h2><h3 id="1-1-1-什么是cookie"><a href="#1-1-1-什么是cookie" class="headerlink" title="1.1.1 什么是cookie"></a>1.1.1 什么是cookie</h3><p>Cookie 是在 HTTP 协议下，服务器或脚本可以维护客户工作站上信息的一种方式。Cookie 是由 Web 服务器保存在用户浏览器（客户端）上的小文本文件，它可以包含有关用户的信息。无论何时用户链接到服务器，Web 站点都可以访问 Cookie 信息 。</p>
<p>Cookie技术是将用户的数据由服务端存储到客户端的技术，我们分为两方面学习： 第一，服务器端怎样将一个Cookie发送到客户端 . 第二，服务器端怎样接受客户端携带的Cookie </p>
<h3 id="1-1-2-Cookie的应用场景"><a href="#1-1-2-Cookie的应用场景" class="headerlink" title="1.1.2 Cookie的应用场景"></a>1.1.2 Cookie的应用场景</h3><ol>
<li><p>记住用户名</p>
</li>
<li><p>自动登录（记住用户名和密码）</p>
</li>
</ol>
<h3 id="1-1-3-Cookie的基本使用"><a href="#1-1-3-Cookie的基本使用" class="headerlink" title="1.1.3 Cookie的基本使用"></a>1.1.3 Cookie的基本使用</h3><h4 id="cookie常用的方法介绍"><a href="#cookie常用的方法介绍" class="headerlink" title="cookie常用的方法介绍"></a>cookie常用的方法介绍</h4><p>Cookie(String name, String value) 创建cookie对象</p>
<ol>
<li><p>String getName()  获取cookie的名称</p>
</li>
<li><p>String getValue()  获取cookie的值</p>
</li>
<li><p>void setPath(String uri)  设置cookie的路径——浏览器根据这个路径判断哪些cookie要发送给服务器</p>
</li>
</ol>
<p>HttpServletResponse</p>
<ol>
<li>void addCookie(Cookie cookie)  将cookie发送给浏览器</li>
</ol>
<p>HttpServletRequest</p>
<ol>
<li>Cookie[] getCookies()  获取浏览器发送的cookie</li>
</ol>
<p>cookie技术原理分析：<br><img src="/2020/04/05/day39cookie-session/1.png" alt></p>
<p>删除cookie</p>
<p>void setMaxAge(int expiry)  设置cookie的最大生存时间（单位：秒）</p>
<p>void setPath(String uri)  设置cookie的路径——浏览器根据这个路径判断那些cookie要发送给服务器</p>
<p>删除cookie步骤 :</p>
<ol>
<li>设置生存时间为 0</li>
<li>后一个用来覆盖cookie必须名称与路径与原来的cookie一致</li>
</ol>
<h2 id="1-2-Session"><a href="#1-2-Session" class="headerlink" title="1.2 Session"></a>1.2 Session</h2><h3 id="1-2-1-基本概念"><a href="#1-2-1-基本概念" class="headerlink" title="1.2.1 基本概念"></a>1.2.1 基本概念</h3><p>当人们去医院就诊时，就诊病人需要办理医院的就诊卡，该卡上只有卡号，而没有其它信息。但病人每次去该医院就诊时，只要出示就诊卡，医务人员便可根据卡号查询到病人的就诊信息。Session技术就好比医院发放给病人的就医卡和医院为每个病人保留病例档案的过程。当浏览器访问Web服务器时，Servlet容器就会创建一个Session对象和ID属性，其中，Session对象就相当于病历档案，ID就相当于就诊卡号。当客户端后续访问服务器时，只要将标识号传递给服务器，服务器就能判断出该请求是哪个客户端发送的，从而选择与之对应的Session对象为其服务。</p>
<p>需要注意的是，由于客户端需要接收、记录和回送Session对象的ID，因此，通常情况下，Session是借助Cookie技术来传递ID属性的。那么哪些数据存在session中呢 ?</p>
<ul>
<li>使用servlet生成验证码时，我们需要在服务器记录一份生成的随机字符，当用户提交填写的数据时，将用户输入的数据和服务器缓存的数据进行比对。</li>
</ul>
<h3 id="1-2-2-应用场景"><a href="#1-2-2-应用场景" class="headerlink" title="1.2.2 应用场景"></a>1.2.2 应用场景</h3><ol>
<li>保存购物车数据</li>
<li>保存用户浏览器记录数据</li>
<li>保存用户登录信息数据</li>
<li>保存验证码</li>
</ol>
<h3 id="1-2-3-基本使用"><a href="#1-2-3-基本使用" class="headerlink" title="1.2.3 基本使用"></a>1.2.3 基本使用</h3><h4 id="存储数据与获取数据"><a href="#存储数据与获取数据" class="headerlink" title="存储数据与获取数据"></a>存储数据与获取数据</h4><p>HttpServletRequest</p>
<ol>
<li>HttpSession getSession()  获取session对象</li>
</ol>
<p>HttpSession</p>
<ol>
<li>void setAttribute(String name, Object value) 在session中保存数据</li>
<li>Object getAttribute(String name)  从session中获取数据</li>
<li>void removeAttribute(String name)  从session中移除数据</li>
</ol>
<p>注意：</p>
<p>getAttribute方法返回值是Object，因此需要将返回值强制转换才能方便使用。</p>
<p>原理分析<br><img src="/2020/04/05/day39cookie-session/2.png" alt></p>
<h3 id="1-2-4-session的持久化"><a href="#1-2-4-session的持久化" class="headerlink" title="1.2.4 session的持久化"></a>1.2.4 session的持久化</h3><p>通过上面的原理图，我们发现记录sessionid的cookie在关闭浏览器之后就到期了，那么如果我们希望——关闭浏览器继续可以访问session数据，该怎么做呢？</p>
<p>实现步骤：</p>
<ol>
<li>创建一个servlet</li>
<li>通过request对象获取session的id</li>
<li>自定义一个cookie对象，保存session的id，注意cookie名称为”JSESSIONID”，设置一个比较长的生存时间</li>
<li>发送给浏览器</li>
</ol>
<h3 id="1-2-5-session生命周期"><a href="#1-2-5-session生命周期" class="headerlink" title="1.2.5 session生命周期"></a>1.2.5 session生命周期</h3><p>session对象什么时候创建</p>
<ul>
<li>当调用request.getSession()方法时 .请求没有携带jsessionid或者携带的不匹配 , 就会创建.</li>
</ul>
<p>session对象什么时候销毁</p>
<ul>
<li><p>默认30分钟销毁, tomcat全局配置文件web.xml , 从最后一次访问时间计时.</p>
</li>
<li><p>手动销毁 : 调用方法session.invalidate();</p>
</li>
<li><p>关闭服务器 , 不考虑钝化的情况.</p>
</li>
</ul>
<h3 id="1-2-6-三大域对象对比"><a href="#1-2-6-三大域对象对比" class="headerlink" title="1.2.6 三大域对象对比"></a>1.2.6 三大域对象对比</h3><p>三个域对象的生命周期的比较？</p>
<ol>
<li><p>ServletContext 创建：服务器启动 销毁：服务器关闭 作用范围：整个web应用</p>
</li>
<li><p>session 创建：本质jsessionid与服务器端的任何session都不匹配时，调用request.getSession()时创建 销毁：服务器关闭/ session失效/ 手动关闭 作用范围：默认一次会话</p>
</li>
<li><p>request 创建：请求 销毁：请求结束 作用范围：一次请求链</p>
</li>
<li><p>是否浏览器关闭对应的session就销毁了？ 不对. 只不过是jsessionid默认会消失。</p>
</li>
<li><p>存储到session中的数据丢失了，有什么可能？ id丢失 或者 session销毁了。</p>
</li>
</ol>
<h3 id="1-2-7-session的与cookie的区别"><a href="#1-2-7-session的与cookie的区别" class="headerlink" title="1.2.7 session的与cookie的区别"></a>1.2.7 session的与cookie的区别</h3><p><img src="/2020/04/05/day39cookie-session/3.png" alt></p>

      
    </div>
    
  </div>
  
  
</article>

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页 &amp;raquo;</a>
  </nav>


</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        清风伴酒
      
    </h3>
    <p class="avatar-slogan">
      进击的后端渣渣
    </p>
  </div>
</div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/javaSE/">javaSE</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">编程语言</a>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/12/day47-maven/">day46_maven</a>
          </li>
        
          <li>
            <a href="/2020/04/12/gong-han-mo-shi/">day46_maven</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day46-redis/">day46_redis</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day45-ajax-json/">day45-AJAX-Json</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day44jquery-gao-ji/">day44jQuery高级</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
        <a style="display: block;" href="https://yiluyanxia.github.io/" title target='_blank'
        >一路眼瞎</a>
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2020 fantasy &nbsp;&nbsp;
    驱动于 <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity" target="_blank" rel="noopener">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>