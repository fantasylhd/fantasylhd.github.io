<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>day21缓冲流、转换流、序列化流、打印流 | fantasyblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="day21缓冲流、转换流、序列化流、打印流1.1 缓冲流昨天学习了基本的一些流，作为IO流的入门，今天我们要见识一些更强大的流。比如能够高效读写的缓冲流，能够转换编码的转换流，能够持久化存储对象的序列化流等等。这些功能更为强大的流，都是在基本的流对象基础之上创建而来的，就像穿上铠甲的武士一样，相当于是对基本流对象的一种增强。 1.1.1 概述">
<meta property="og:type" content="article">
<meta property="og:title" content="day21缓冲流、转换流、序列化流、打印流">
<meta property="og:url" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/index.html">
<meta property="og:site_name" content="fantasyblog">
<meta property="og:description" content="day21缓冲流、转换流、序列化流、打印流1.1 缓冲流昨天学习了基本的一些流，作为IO流的入门，今天我们要见识一些更强大的流。比如能够高效读写的缓冲流，能够转换编码的转换流，能够持久化存储对象的序列化流等等。这些功能更为强大的流，都是在基本的流对象基础之上创建而来的，就像穿上铠甲的武士一样，相当于是对基本流对象的一种增强。 1.1.1 概述">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/01_%E4%B9%B1%E7%A0%81%E7%9A%84%E5%88%86%E6%9E%90.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/02_InputStreamReader%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/03_OutputStreamWriter%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/04_%E5%BA%8F%E5%88%97%E5%8C%96_%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E6%A6%82%E5%BF%B5.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/05_%E5%BA%8F%E5%88%97%E5%8F%B7%E5%86%B2%E7%AA%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.png">
<meta property="article:published_time" content="2020-02-26T08:56:13.000Z">
<meta property="article:modified_time" content="2020-03-01T13:33:23.261Z">
<meta property="article:author" content="fantasy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fantasylhd.github.io/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/01_%E4%B9%B1%E7%A0%81%E7%9A%84%E5%88%86%E6%9E%90.png">
  
    <link rel="alternate" href="/atom.xml" title="fantasyblog" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/highlight.css">

<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main"><article id="post-day21缓冲流、转换流、序列化流、打印流" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      day21缓冲流、转换流、序列化流、打印流
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/" class="article-date">
  <time datetime="2020-02-26T08:56:13.000Z" itemprop="datePublished">2020-02-26</time>
</a>
    
    
  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day21缓冲流、转换流、序列化流、打印流"><a href="#day21缓冲流、转换流、序列化流、打印流" class="headerlink" title="day21缓冲流、转换流、序列化流、打印流"></a>day21缓冲流、转换流、序列化流、打印流</h1><h2 id="1-1-缓冲流"><a href="#1-1-缓冲流" class="headerlink" title="1.1 缓冲流"></a>1.1 缓冲流</h2><p>昨天学习了基本的一些流，作为IO流的入门，今天我们要见识一些更强大的流。比如能够高效读写的缓冲流，能够转换编码的转换流，能够持久化存储对象的序列化流等等。这些功能更为强大的流，都是在基本的流对象基础之上创建而来的，就像穿上铠甲的武士一样，相当于是对基本流对象的一种增强。</p>
<h3 id="1-1-1-概述"><a href="#1-1-1-概述" class="headerlink" title="1.1.1 概述"></a>1.1.1 概述</h3><a id="more"></a>
<p>缓冲流,也叫高效流，是对4个基本的 FileXxx 流的增强，所以也是4个流，按照数据类型分类：</p>
<ul>
<li>字节缓冲流： BufferedInputStream ， BufferedOutputStream</li>
<li>字符缓冲流： BufferedReader ， BufferedWriter</li>
</ul>
<p>缓冲流的基本原理，是在创建流对象时，会创建一个内置的默认大小的缓冲区数组，通过缓冲区读写，减少系统IO次数，从而提高读写的效率。</p>
<h3 id="1-1-2-字节缓冲流"><a href="#1-1-2-字节缓冲流" class="headerlink" title="1.1.2 字节缓冲流"></a>1.1.2 字节缓冲流</h3><ul>
<li>构造方法</li>
</ul>
<p>public BufferedInputStream(InputStream in) ：创建一个 新的缓冲输入流。</p>
<p>public BufferedOutputStream(OutputStream out) ： 创建一个新的缓冲输出流。</p>
<ul>
<li><p>示例代码</p>
<pre class=" language-java"><code class="language-java">      <span class="token comment" spellcheck="true">//1.创建高效缓冲字节输入流BufferedInputStream类的对象bis,传递FileInputStream类的对象fis,绑定源文件</span>
      BufferedInputStream bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>srcFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//2.创建高效缓冲字节输出流BufferedOutputStream类的对象bos,传递FileOutputStream类的对象fos,绑定目标文件</span>
      BufferedOutputStream bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>destFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<h3 id="1-1-3-字符缓冲流"><a href="#1-1-3-字符缓冲流" class="headerlink" title="1.1.3 字符缓冲流"></a>1.1.3 字符缓冲流</h3><ul>
<li>构造方法</li>
</ul>
<p>public BufferedReader(Reader in) ：创建一个 新的缓冲输入流。</p>
<p>public BufferedWriter(Writer out) ： 创建一个新的缓冲输出流。</p>
<ul>
<li>特有方法</li>
</ul>
<p>BufferedReader： public String readLine() : 读一行文字。</p>
<p>BufferedWriter： public void newLine() : 写一行行分隔符,由系统属性定义符号。</p>
<ul>
<li><p>示例代码</p>
<pre class=" language-java"><code class="language-java">   <span class="token comment" spellcheck="true">//1.创建高效字符输出流BufferedWriter对象bw,传递Writer类的子类FileWriter对象</span>
   BufferedWriter bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"day12\\bw.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//2.创建高效字符输入流BufferedReader对象br,传递Reader类的子类FileReader对象</span>
   BufferedReader br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"day12\\bw.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   </code></pre>
</li>
</ul>
<h3 id="1-1-4-练习-文本排序"><a href="#1-1-4-练习-文本排序" class="headerlink" title="1.1.4 练习:文本排序"></a>1.1.4 练习:文本排序</h3><p>将前面带有序号的文本进行排序</p>
<p>案例分析</p>
<ol>
<li>使用流对象逐行读取原文本信息,把读取的信息保存到集合中</li>
<li>使用Collections集合工具类中的方法sort,对集合中的元素按照自定义规则排序</li>
<li>遍历集合,把集合中排序后的文本在写入到新的记事本中</li>
</ol>
<ul>
<li><p>示例代码</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo04TxtFileSort</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//1.创建BufferedReader类的对象br,绑定源文件csbnosort.txt</span>
      BufferedReader br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"day12\\csbnosort.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//2.创建Map集合对象,键: Integer,值: String</span>
      Map<span class="token operator">&lt;</span>Integer<span class="token punctuation">,</span>String<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//3.循环按行读取源文件</span>
      String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
      <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span>null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">//3.1 把读取到的当前行进行按照句点(.)切割</span>
          String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment" spellcheck="true">//3.2 把切割后的内容存储到Map集合中(数字作为键,文本作为值)</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment" spellcheck="true">//4.获取Map集合对象中的所有的键对应的Set集合</span>
      Set<span class="token operator">&lt;</span>Integer<span class="token operator">></span> set <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//5.所有的键对应的Set集合转换成List集合: 利用构造方法</span>
      List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//6.Collections的sort方法对List集合进行排序</span>
      Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//7.创建BufferedWriter对象bw,绑定目标文件csbsorted.txt</span>
      BufferedWriter bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"day12\\csbsorted.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//8.遍历List集合</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>Integer num <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">//8.1 使用当前数字作为键,获取对应的值</span>
          String str <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment" spellcheck="true">//8.2 把键和值,拼接出一行</span>
          String line2 <span class="token operator">=</span> num <span class="token operator">+</span><span class="token string">"."</span><span class="token operator">+</span> str<span class="token punctuation">;</span>

          <span class="token comment" spellcheck="true">//8.3 BufferedWriter对象bw调用write方法写入新的一行</span>
          bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line2<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment" spellcheck="true">//8.4 BufferedWriter对象bw调用write方法写入换行符</span>
          bw<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment" spellcheck="true">//9.关闭流,释放资源</span>
      br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> </code></pre>
</li>
</ul>
<h2 id="1-2-转换流"><a href="#1-2-转换流" class="headerlink" title="1.2 转换流"></a>1.2 转换流</h2><h3 id="1-2-1-字符编码和字符集"><a href="#1-2-1-字符编码和字符集" class="headerlink" title="1.2.1 字符编码和字符集"></a>1.2.1 字符编码和字符集</h3><p>字符编码</p>
<p>计算机中储存的信息都是用二进制数表示的，而我们在屏幕上看到的数字、英文、标点符号、汉字等字符是二进制数转换之后的结果。按照某种规则，将字符存储到计算机中，称为编码 。反之，将存储在计算机中的二进制数按照某种规则解析显示出来，称为解码 。比如说，按照A规则存储，同样按照A规则解析，那么就能显示正确的文本f符号。反之，按照A规则存储，再按照B规则解析，就会导致乱码现象。</p>
<p>编码: 字符转换为字节</p>
<p>解码:字节转换为字符</p>
<p>字符集</p>
<p>Charset ：也叫编码表。是一个系统支持的所有字符的集合，包括各国家文字、标点符号、图形符号、数字等。</p>
<p>计算机要准确的存储和识别各种字符集符号，需要进行字符编码，一套字符集必然至少有一套字符编码。常见字符集有ASCII字符集、GBK字符集、Unicode字符集等</p>
<h3 id="1-2-2-编码引出的问题"><a href="#1-2-2-编码引出的问题" class="headerlink" title="1.2.2 编码引出的问题"></a>1.2.2 编码引出的问题</h3><p>在IDEA中，使用 FileReader 读取项目中的文本文件。由于IDEA的设置，都是默认的 UTF-8 编码，所以没有任何问题。但是，当读取Windows系统中创建的文本文件时，由于Windows系统的默认是GBK编码，就会出现乱码。</p>
<p>乱码分析图解<br><img src="/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/01_%E4%B9%B1%E7%A0%81%E7%9A%84%E5%88%86%E6%9E%90.png" alt="01_乱码的分析图"></p>
<ul>
<li>示例代码<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo04LuanMa</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>
      FileReader fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"day12\\luanma.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">//单字符循环读取</span>
      <span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      fr<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
</li>
</ul>
<h3 id="1-2-3-字节转换流"><a href="#1-2-3-字节转换流" class="headerlink" title="1.2.3 字节转换流"></a>1.2.3 字节转换流</h3><p>转换流 java.io.InputStreamReader ，是Reader的子类，是从字节流到字符流的桥梁。它读取字节，并使用指定的字符集将其解码为字符。它的字符集可以由名称指定，也可以接受平台的默认字符集。</p>
<p>转换流 java.io.OutputStreamWriter ，是Writer的子类，是从字符流到字节流的桥梁。使用指定的字符集将字符<br>编码为字节。它的字符集可以由名称指定，也可以接受平台的默认字符集</p>
<ul>
<li>构造方法</li>
</ul>
<p>InputStreamReader(InputStream in) : 创建一个使用默认字符集的字符流。</p>
<p>InputStreamReader(InputStream in, String charsetName) : 创建一个指定字符集的字符流。</p>
<ul>
<li>构造方法</li>
</ul>
<p>OutputStreamWriter(OutputStream in) : 创建一个使用默认字符集的字符流。</p>
<p>OutputStreamWriter(OutputStream in, String charsetName) : 创建一个指定字符集的字符流。</p>
<ul>
<li><p>示例代码</p>
<pre class=" language-java"><code class="language-java">      <span class="token comment" spellcheck="true">//1.创建InputStreamReader类对象isr,创建匿名的文件输入对象,指定编码表</span>
      InputStreamReader isr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"day12\\utf8file.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment" spellcheck="true">//2.创建OutputStreamWriter类对象osw,创建匿名的文件输出对象,指定编码表</span>
      OutputStreamWriter osw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"day12\\gbkfile2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"GBK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</li>
</ul>
<p>字节流的转换图解<br><img src="/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/02_InputStreamReader%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png" alt="02_InputStreamReader原理分析图"><br><img src="/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/03_OutputStreamWriter%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.png" alt="03_OutputStreamWriter原理分析图"></p>
<h2 id="1-3-序列化流"><a href="#1-3-序列化流" class="headerlink" title="1.3 序列化流"></a>1.3 序列化流</h2><h3 id="1-3-1-概述"><a href="#1-3-1-概述" class="headerlink" title="1.3.1 概述"></a>1.3.1 概述</h3><p>Java 提供了一种对象序列化的机制。用一个字节序列可以表示一个对象，该字节序列包含该 对象的数据 、 对象的类型 和 对象中存储的属性 等信息。字节序列写出到文件之后，相当于文件中持久保存了一个对象的信息。</p>
<p>反之，该字节序列还可以从文件中读取回来，重构对象，对它进行反序列化。 对象的数据 、 对象的类型 和 对象中存储的数据 信息，都可以用来在内存中创建对象。</p>
<p>序列化图解<br><img src="/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/04_%E5%BA%8F%E5%88%97%E5%8C%96_%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E6%A6%82%E5%BF%B5.png" alt="04_序列化_反序列化的概念图"></p>
<h3 id="1-3-2-ObjectOutputStream类"><a href="#1-3-2-ObjectOutputStream类" class="headerlink" title="1.3.2 ObjectOutputStream类"></a>1.3.2 ObjectOutputStream类</h3><p>java.io.ObjectOutputStream 类，将Java对象的原始数据类型写出到文件,实现对象的持久存储。</p>
<ul>
<li>构造方法</li>
</ul>
<p>public ObjectOutputStream(OutputStream out) ： 创建一个指定OutputStream的ObjectOutputStream。</p>
<ul>
<li>序列化操作</li>
</ul>
<ol>
<li>一个对象要想序列化，必须满足两个条件:该类必须实现 java.io.Serializable 接口， Serializable 是一个标记接口，不实现此接口的类将不会使任何状态序列化或反序列化，会抛出 NotSerializableException 。</li>
<li>该类的所有属性必须是可序列化的。如果有一个属性不需要可序列化的，则该属性必须注明是瞬态的，使用transient 关键字修饰</li>
<li>写出对象方法<br>public final void writeObject (Object obj) : 将指定的对象写出。</li>
</ol>
<h3 id="1-3-3-ObjectInputStream类"><a href="#1-3-3-ObjectInputStream类" class="headerlink" title="1.3.3 ObjectInputStream类"></a>1.3.3 ObjectInputStream类</h3><p>ObjectInputStream反序列化流，将之前使用ObjectOutputStream序列化的原始数据恢复为对象。</p>
<ul>
<li>构造方法</li>
</ul>
<p>public ObjectInputStream(InputStream in) ： 创建一个指定InputStream的ObjectInputStream。</p>
<ul>
<li><p>反序列化操作1<br>如果能找到一个对象的class文件，我们可以进行反序列化操作，调用ObjectInputStream 读取对象的方法：public final Object readObject () : 读取一个对象。</p>
</li>
<li><p>反序列化操作2<br>另外，当JVM反序列化对象时，能找到class文件，但是class文件在序列化对象之后发生了修改，那么反序列化操作也会失败，抛出一个 InvalidClassException 异常。发生这个异常的原因如下：</p>
</li>
</ul>
<p>该类的序列版本号与从流中读取的类描述符的版本号不匹配</p>
<p>该类包含未知数据类型</p>
<p>该类没有可访问的无参数构造方法</p>
<p>Serializable 接口给需要序列化的类，提供了一个序列版本号。 serialVersionUID 该版本号的目的在于验证序列化的对象和对应类是否版本匹配。 </p>
<p>序列号冲突图解<br><img src="/2020/02/26/day21-huan-chong-liu-zhuan-huan-liu-xu-lie-hua-liu-da-yin-liu/05_%E5%BA%8F%E5%88%97%E5%8F%B7%E5%86%B2%E7%AA%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.png" alt="05_序列号冲突的解决方案图"></p>
<h3 id="序列化和反序列化示例代码"><a href="#序列化和反序列化示例代码" class="headerlink" title="序列化和反序列化示例代码"></a>序列化和反序列化示例代码</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo05WriteReadObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//writeObject2File();</span>
        <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//反序列化: 从文件中读出一个对象</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readObjectFromFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//1.创建字节输入流InputStream类的子类FileInputStream对象fis,绑定源文件</span>
        FileInputStream fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"day12\\info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//2.创建ObjectInputStream类的对象ois,传递fis</span>
        ObjectInputStream ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//3.ObjectInputStream类的对象ois调用readObject方法,从文件中读出一个对象</span>
        Person p <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//4.关闭流,释放资源</span>
        ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//序列化: 把对象写入到文件</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeObject2File</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//1.创建字节输出流OutputStream类的子类FileOutputStream对象fos,绑定目标文件</span>
        FileOutputStream fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"day12\\info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//2.创建一个需要序列化的对象</span>
        Person p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//3.创建ObjectOutputStream类的对象oos,传递fos</span>
        ObjectOutputStream oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>fos<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//4.ObjectOutputStream类的对象oos调用writeObject方法,向文件中写出对象</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//5.关闭流,释放资源</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="1-4-打印流"><a href="#1-4-打印流" class="headerlink" title="1.4 打印流"></a>1.4 打印流</h2><h3 id="1-4-1-概述"><a href="#1-4-1-概述" class="headerlink" title="1.4.1 概述"></a>1.4.1 概述</h3><p>平时我们在控制台打印输出，是调用 print 方法和 println 方法完成的，这两个方法都来自于java.io.PrintStream 类，该类能够方便地打印各种数据类型的值，是一种便捷的输出方式。</p>
<h3 id="1-4-2-PrintStream类"><a href="#1-4-2-PrintStream类" class="headerlink" title="1.4.2 PrintStream类"></a>1.4.2 PrintStream类</h3><ul>
<li>构造方法<br>public PrintStream(String fileName) ： 使用指定的文件名创建一个新的打印流。</li>
</ul>
<ul>
<li>特有方法</li>
</ul>
<p>print(xxx):不带换行     原样写出</p>
<p>println(xxx):带换行     原样写出</p>
<ul>
<li>静态方法</li>
</ul>
<p>public static void setOut(PrintStream out) : 指定输出的目的地</p>
<p>System.out 就是 PrintStream 类型的，只不过它的流向是系统规定的，打印在控制台上。不过，既然是流对象，我们就可以玩一个”小把戏”，将数据输出到指定文本文件中。</p>
<ul>
<li><p>示例代码</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo02PrintStream</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> FileNotFoundException <span class="token punctuation">{</span>
      PrintStream ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">"day12\\ps2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      System<span class="token punctuation">.</span><span class="token function">setOut</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
</li>
</ul>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
      <a href="/2020/03/01/day22lambda-han-shu-shi-jie-kou-stream-liu/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption"></strong>
        <div class="article-nav-title">
          
            day22Lambda、函数式接口、Stream流
          
        </div>
      </a>
    
  </div>
  <div class="article-nav-block">
    
      <a href="/2020/02/25/day20-zi-jie-liu-zi-fu-liu-properties-ji-he/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">day20字节流、字符流、Properties集合</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    <link rel="stylesheet" href="/css/gitment.css"> 
<script src="/js/gitment.js"></script>

<div id="gitmentContainer"></div>

<script>
var gitment = new Gitment({
  owner: '',
  repo: '',
  oauth: {
    client_id: '',
    client_secret: '',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        清风伴酒
      
    </h3>
    <p class="avatar-slogan">
      进击的后端渣渣
    </p>
  </div>
</div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/javaSE/">javaSE</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">编程语言</a>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/12/day47-maven/">day46_maven</a>
          </li>
        
          <li>
            <a href="/2020/04/12/gong-han-mo-shi/">day46_maven</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day46-redis/">day46_redis</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day45-ajax-json/">day45-AJAX-Json</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day44jquery-gao-ji/">day44jQuery高级</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
        <a style="display: block;" href="https://yiluyanxia.github.io/" title target='_blank'
        >一路眼瞎</a>
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2020 fantasy &nbsp;&nbsp;
    驱动于 <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity" target="_blank" rel="noopener">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>