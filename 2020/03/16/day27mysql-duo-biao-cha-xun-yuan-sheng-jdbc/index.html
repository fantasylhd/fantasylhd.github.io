<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>day27mysql多表查询-原生jdbc | fantasyblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="day27mysql多表查询-原生jdbc1.1 多表关系实战1.1.1 实战1：省和市 方案1：多张表，一对多">
<meta property="og:type" content="article">
<meta property="og:title" content="day27mysql多表查询-原生jdbc">
<meta property="og:url" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/index.html">
<meta property="og:site_name" content="fantasyblog">
<meta property="og:description" content="day27mysql多表查询-原生jdbc1.1 多表关系实战1.1.1 实战1：省和市 方案1：多张表，一对多">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/01.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/02.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/03.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/01_%E7%94%A8%E6%88%B7_%E8%A7%92%E8%89%B2_%E6%9D%83%E9%99%90%E4%B8%89%E8%A1%A8%E5%85%B3%E7%B3%BB.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/04.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/02_%E4%BA%A4%E5%8F%89%E6%9F%A5%E8%AF%A2.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/05.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/06.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/07.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/08.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/04_jdbc%E6%A6%82%E5%BF%B5.png">
<meta property="og:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/11.png">
<meta property="article:published_time" content="2020-03-16T06:31:08.000Z">
<meta property="article:modified_time" content="2020-03-18T08:46:56.377Z">
<meta property="article:author" content="fantasy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fantasylhd.github.io/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/01.png">
  
    <link rel="alternate" href="/atom.xml" title="fantasyblog" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/highlight.css">

<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main"><article id="post-day27mysql多表查询-原生jdbc" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      day27mysql多表查询-原生jdbc
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/" class="article-date">
  <time datetime="2020-03-16T06:31:08.000Z" itemprop="datePublished">2020-03-16</time>
</a>
    
    
  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="day27mysql多表查询-原生jdbc"><a href="#day27mysql多表查询-原生jdbc" class="headerlink" title="day27mysql多表查询-原生jdbc"></a>day27mysql多表查询-原生jdbc</h1><h2 id="1-1-多表关系实战"><a href="#1-1-多表关系实战" class="headerlink" title="1.1 多表关系实战"></a>1.1 多表关系实战</h2><h3 id="1-1-1-实战1：省和市"><a href="#1-1-1-实战1：省和市" class="headerlink" title="1.1.1 实战1：省和市"></a>1.1.1 实战1：省和市</h3><ul>
<li><p>方案1：多张表，一对多</p>
<a id="more"></a>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/01.png" alt></p>
</li>
<li><p>方案2：一张表，自关联一对多</p>
</li>
</ul>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/02.png" alt></p>
<p>id=1</p>
<p>name=’北京’</p>
<p>p_id = null;</p>
<p>id=2</p>
<p>name=’昌平’</p>
<p>p_id=1</p>
<p>id=3</p>
<p>name=’大兴’</p>
<p>p_id=1</p>
<p>id=3</p>
<p>name=’上海’</p>
<p>p_id=null</p>
<p>id=4</p>
<p>name=’浦东’</p>
<p>p_id=3</p>
<h3 id="1-1-2-实战2：用户和角色"><a href="#1-1-2-实战2：用户和角色" class="headerlink" title="1.1.2 实战2：用户和角色"></a>1.1.2 实战2：用户和角色</h3><ul>
<li>多对多关系</li>
</ul>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/03.png" alt></p>
<h3 id="1-1-3-实战3：用户-角色-权限"><a href="#1-1-3-实战3：用户-角色-权限" class="headerlink" title="1.1.3 实战3：用户_角色_权限"></a>1.1.3 实战3：用户_角色_权限</h3><ul>
<li>多对多关系<br><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/01_%E7%94%A8%E6%88%B7_%E8%A7%92%E8%89%B2_%E6%9D%83%E9%99%90%E4%B8%89%E8%A1%A8%E5%85%B3%E7%B3%BB.png" alt></li>
</ul>
<h2 id="1-2-多表查询"><a href="#1-2-多表查询" class="headerlink" title="1.2 多表查询"></a>1.2 多表查询</h2><p><strong>提供表结构如下：</strong></p>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/04.png" alt></p>
<pre class=" language-mysql"><code class="language-mysql"># 分类表
CREATE TABLE category (
  cid VARCHAR(32) PRIMARY KEY ,
  cname VARCHAR(50)
);

#商品表
CREATE TABLE products(
  pid VARCHAR(32) PRIMARY KEY ,
  pname VARCHAR(50),
  price INT,
  flag VARCHAR(2), #是否上架标记为：1表示上架、0表示下架
  cid VARCHAR(32),
  CONSTRAINT products_fk FOREIGN KEY products(cid) REFERENCES category (cid)
);</code></pre>
<h3 id="2-1-1-初始化数据"><a href="#2-1-1-初始化数据" class="headerlink" title="2.1.1 初始化数据"></a>2.1.1 初始化数据</h3><pre class=" language-mysql"><code class="language-mysql">#分类
INSERT INTO category(cid,cname) VALUES('c001','家电');
INSERT INTO category(cid,cname) VALUES('c002','服饰');
INSERT INTO category(cid,cname) VALUES('c003','化妆品');
#商品
INSERT INTO products(pid, pname,price,flag,cid) VALUES('p001','联想',5000,'1','c001');
INSERT INTO products(pid, pname,price,flag,cid) VALUES('p002','海尔',3000,'1','c001');
INSERT INTO products(pid, pname,price,flag,cid) VALUES('p003','雷神',5000,'1','c001');

INSERT INTO products (pid, pname,price,flag,cid) VALUES('p004','JACK JONES',800,'1','c002');
INSERT INTO products (pid, pname,price,flag,cid) VALUES('p005','真维斯',200,'1','c002');
INSERT INTO products (pid, pname,price,flag,cid) VALUES('p006','花花公子',440,'1','c002');
INSERT INTO products (pid, pname,price,flag,cid) VALUES('p007','劲霸',2000,'1','c002');

INSERT INTO products (pid, pname,price,flag,cid) VALUES('p008','香奈儿',800,'1','c003');
INSERT INTO products (pid, pname,price,flag,cid) VALUES('p009','相宜草',200,'1','c003');</code></pre>
<h3 id="1-2-2-多表查询"><a href="#1-2-2-多表查询" class="headerlink" title="1.2.2  多表查询"></a>1.2.2  多表查询</h3><ol>
<li>交叉连接查询(基本不会使用-得到的是两个表的乘积)</li>
</ol>
<p>交叉查询图解：<br><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/02_%E4%BA%A4%E5%8F%89%E6%9F%A5%E8%AF%A2.png" alt></p>
<ul>
<li>语法：<code>select * from A,B;</code></li>
</ul>
<ol>
<li>内连接查询(使用的关键字 inner join  – inner可以省略)</li>
</ol>
<ul>
<li>隐式内连接：<code>select * from A,B where 条件;</code></li>
</ul>
<ul>
<li>显示内连接：<code>select * from A inner join B on 条件;</code></li>
</ul>
<pre class=" language-mysql"><code class="language-mysql">1.查询哪些分类的商品已经上架

#隐式内连接
SELECT DISTINCT c.cname 
FROM category c , products p 
WHERE c.cid = p.cid AND p.flag = '1';

显示内连接
SELECT DISTINCT c.cname 
FROM category c INNER JOIN products p 
ON c.cid = p.cid 
WHERE p.flag = '1';


2.查询每种分类商品的个数
#隐式内连接
SELECT c.cid,c.cname COUNT(p.pid)
FROM category c , products p
WHERE c.cid=p.cid GROUP BY c.cid 

#显示内连接
SELECT c.cid,c.cname COUNT(p.pid)
FROM category c INNER JOIN products p 
ON c.cid = p.cid GROUP BY c.cid 
</code></pre>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/05.png" alt></p>
<ol start="2">
<li>外连接查询(使用的关键字 outer join – outer可以省略)</li>
</ol>
<ul>
<li>左外连接：left outer join<ul>
<li><code>select * from A left outer join B on 条件;</code></li>
</ul>
</li>
<li>右外连接：right outer join<ul>
<li><code>select * from A right outer join B on 条件;</code></li>
</ul>
</li>
</ul>
<pre class=" language-mysql"><code class="language-mysql">1.查询每种分类商品的个数

#左外连接
INSERT INTO category(cid,cname) VALUES('c004','奢侈品');

SELECT cname,COUNT(cid) 
FROM category c LEFT OUTER JOIN products p 
ON c.cid = p.cid 
GROUP BY cname;</code></pre>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/06.png" alt></p>
<p>下面通过一张图说明连接的区别:</p>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/07.png" alt></p>
<p>注意：</p>
<p>左外连接查询：以left join 左侧的表为标准,左表中的所有记录都会显示,不管有没有对应的右表内容</p>
<p>隐式内连接: 会保证左右两边的记录的cid必须相同才会显示</p>
<h3 id="1-2-3-子查询"><a href="#1-2-3-子查询" class="headerlink" title="1.2.3 子查询"></a>1.2.3 子查询</h3><p><strong>子查询</strong>：一条select语句结果作为另一条select语法一部分（查询条件，查询结果，表等）。<br><strong>语法</strong>：<code>select ....查询字段 ... from ... 表.. where ... 查询条件</code></p>
<pre class=" language-mysql"><code class="language-mysql">#3 子查询, 查询“化妆品”分类上架商品详情
#隐式内连接
SELECT p.* 
FROM products p , category c 
WHERE p.cid=c.cid AND c.cname = '化妆品';

#子查询
##作为查询条件
SELECT * 
FROM products p 
WHERE p.cid = 
    ( 
        SELECT c.cid FROM category c 
            WHERE c.cname='化妆品'
    );

##作为另一张表
SELECT * 
FROM products p , 
     (SELECT * FROM category WHERE cname='化妆品') c 
WHERE p.cid = c.cid;</code></pre>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/08.png" alt></p>
<p><strong>子查询练习：</strong></p>
<pre class=" language-mysql"><code class="language-mysql">#查询“化妆品”和“家电”两个分类上架商品详情
SELECT * 
FROM products p 
WHERE p.cid in 
    (SELECT c.cid 
     FROM category c 
     WHERE c.cname='化妆品' or c.name='家电'
    );</code></pre>
<h2 id="1-3-JDBC"><a href="#1-3-JDBC" class="headerlink" title="1.3 JDBC"></a>1.3 JDBC</h2><h3 id="1-3-1-JDBC概述"><a href="#1-3-1-JDBC概述" class="headerlink" title="1.3.1 JDBC概述"></a>1.3.1 JDBC概述</h3><p>JDBC（Java DataBase Connectivity,java数据库连接）是一种用于执行SQL语句的Java API。JDBC是Java访问数据库的标准规范，可以为不同的关系型数据库提供统一访问，它由一组用Java语言编写的接口和类组成。</p>
<p>JDBC需要连接驱动，驱动是两个设备要进行通信，满足一定通信数据格式，数据格式由设备提供商规定，设备提供商为设备提供驱动软件，通过软件可以与该设备进行通信。</p>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/04_jdbc%E6%A6%82%E5%BF%B5.png" alt></p>
<p><strong>JDBC规范（掌握四个核心对象）：</strong></p>
<ul>
<li>DriverManager:用于注册驱动</li>
<li>Connection: 表示与数据库创建的连接</li>
<li>Statement: 操作数据库sql语句的对象</li>
<li>ResultSet: 结果集或一张虚拟表</li>
</ul>
<h3 id="1-3-2-JDBC原理"><a href="#1-3-2-JDBC原理" class="headerlink" title="1.3.2 JDBC原理"></a>1.3.2 JDBC原理</h3><p>Java提供访问数据库规范称为JDBC，而生产厂商提供规范的实现类称为驱动。</p>
<p>JDBC是接口，驱动是接口的实现，没有驱动将无法完成数据库连接，从而不能操作数据库！每个数据库厂商都需要提供自己的驱动，用来连接自己公司的数据库，也就是说驱动一般都由数据库生成厂商提供。</p>
<h3 id="1-3-3-JDBC入门案例"><a href="#1-3-3-JDBC入门案例" class="headerlink" title="1.3.3 JDBC入门案例"></a>1.3.3 JDBC入门案例</h3><h3 id="1-3-4-准备数据"><a href="#1-3-4-准备数据" class="headerlink" title="1.3.4 准备数据"></a>1.3.4 准备数据</h3><p>之前我们学习了sql语句的使用，并创建的分类表category，今天我们将使用JDBC对分类表进行增删改查操作。</p>
<pre class=" language-mysql"><code class="language-mysql">#创建数据库
create database day04;
#使用数据库
use day04;
#创建学生表
        CREATE TABLE scores(
            sid INT PRIMARY KEY,
            score INT,
            sname VARCHAR(200)
        );</code></pre>
<h3 id="1-3-5-导入驱动jar包"><a href="#1-3-5-导入驱动jar包" class="headerlink" title="1.3.5 导入驱动jar包"></a>1.3.5 导入驱动jar包</h3><p>创建lib目录，存放mysql的驱动mysql-connector-java-5.1.37-bin.jar</p>
<p>选中mysql的jar包，右键选择“ Add as Library…” 完成jar导入</p>
<p><img src="/2020/03/16/day27mysql-duo-biao-cha-xun-yuan-sheng-jdbc/11.png" alt></p>
<h3 id="1-3-6-开发步骤"><a href="#1-3-6-开发步骤" class="headerlink" title="1.3.6 开发步骤"></a>1.3.6 开发步骤</h3><ol>
<li>注册驱动.</li>
<li>获得连接.</li>
<li>获得执行sql语句的对象</li>
<li>执行sql语句，并返回结果</li>
<li>处理结果</li>
<li>释放资源.</li>
</ol>
<h3 id="案例实现"><a href="#案例实现" class="headerlink" title="案例实现"></a>案例实现</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo03JDBC</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException<span class="token punctuation">,</span> ClassNotFoundException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//1.注册驱动</span>
        Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//2. 获得连接.</span>
        <span class="token comment" spellcheck="true">//定义数据库的连接地址</span>
        String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/day04"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//定义用户名</span>
        String userName <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//定义密码</span>
        String passWord <span class="token operator">=</span> <span class="token string">"123456"</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//调用方法,获取到数据库的连接对象</span>
        Connection con <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> userName<span class="token punctuation">,</span> passWord<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//com.mysql.jdbc.JDBC4Connection@2b71fc7e</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="1-4-API详解"><a href="#1-4-API详解" class="headerlink" title="1.4 API详解"></a>1.4 API详解</h2><h3 id="API详解：注册驱动"><a href="#API详解：注册驱动" class="headerlink" title="API详解：注册驱动"></a>API详解：注册驱动</h3><p><code>DriverManager.registerDriver(new com.mysql.jdbc.Driver());</code>不建议使用，原因有2个：</p>
<ul>
<li>导致驱动被注册2次</li>
<li>强烈依赖数据库的驱动jar</li>
</ul>
<p>解决办法：</p>
<ul>
<li><code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></li>
</ul>
<p>好处: 参数是String类型的全类名,可以写到配置文件中</p>
<h3 id="1-4-1-API详解：获得链接"><a href="#1-4-1-API详解：获得链接" class="headerlink" title="1.4.1 API详解：获得链接"></a>1.4.1 API详解：获得链接</h3><p><code>static Connection getConnection(String url, String user, String password)</code>:试图建立到给定数据库 URL 的连接。</p>
<ul>
<li>参数说明：<ul>
<li>url 需要连接数据库的位置（网址） </li>
<li>user用户名  </li>
<li>password 密码</li>
</ul>
</li>
<li>例如：<code>getConnection(&quot;jdbc:mysql://localhost:3306/day04&quot;, &quot;root&quot;, &quot;root&quot;);</code></li>
</ul>
<blockquote>
<p>扩展：</p>
<p>URL:SUN公司与数据库厂商之间的一种协议。</p>
<p>jdbc:mysql://localhost:3306/day04</p>
<p>协议子协议  IP :端口号数据库<br>​    mysql: jdbc:mysql://localhost:3306/day04 或者 jdbc:mysql:///day04（默认本机连接）<br>​    oracle数据库: jdbc:oracle:thin:@localhost:1521:sid</p>
</blockquote>
<h3 id="1-4-2-API详解：java-sql-Connection接口：一个连接"><a href="#1-4-2-API详解：java-sql-Connection接口：一个连接" class="headerlink" title="1.4.2 API详解：java.sql.Connection接口：一个连接"></a>1.4.2 API详解：java.sql.Connection接口：一个连接</h3><p>接口的实现在数据库驱动中。所有与数据库交互都是基于连接对象的。</p>
<ul>
<li><code>Statement  createStatement();</code>//创建操作sql语句的对象</li>
</ul>
<h3 id="1-4-3-API详解：java-sql-Statement接口-操作sql语句，并返回相应结果"><a href="#1-4-3-API详解：java-sql-Statement接口-操作sql语句，并返回相应结果" class="headerlink" title="1.4.3 API详解：java.sql.Statement接口: 操作sql语句，并返回相应结果"></a>1.4.3 API详解：java.sql.Statement接口: 操作sql语句，并返回相应结果</h3><pre class=" language-java"><code class="language-java">String sql <span class="token operator">=</span> <span class="token string">"某SQL语句"</span><span class="token punctuation">;</span>
获取Statement语句执行平台：Statement stmt <span class="token operator">=</span>con<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>常用方法：</p>
<ul>
<li><code>int executeUpdate(String sql);</code>–执行insert update delete语句.</li>
</ul>
<ul>
<li><code>ResultSet executeQuery(String sql);</code> –执行select语句.</li>
</ul>
<ul>
<li><code>boolean execute(String sql);</code> –仅当执行select并且有结果时才返回true，执行其他的语句返回false.</li>
</ul>
<h3 id="1-4-4-API详解：处理结果集（注：执行insert、update、delete无需处理）"><a href="#1-4-4-API详解：处理结果集（注：执行insert、update、delete无需处理）" class="headerlink" title="1.4.4 API详解：处理结果集（注：执行insert、update、delete无需处理）"></a>1.4.4 API详解：处理结果集（注：执行insert、update、delete无需处理）</h3><p>ResultSet实际上就是一张二维的表格，我们可以调用其<code>boolean next()</code>方法指向某行记录，当第一次调用<code>next()</code>方法时，便指向第一行记录的位置，这时就可以使用ResultSet提供的<code>getXXX(int col)</code>方法来获取指定列的数据：(与数组索引从0开始不同，这里索引从1开始)</p>
<pre class=" language-java"><code class="language-java">rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//指向第一行</span>
rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取第一行第一列的数据</span></code></pre>
<p>常用方法：</p>
<ul>
<li><code>Object getObject(int index)</code> / <code>Object getObject(String name)</code> 获得任意对象</li>
<li><code>String getString(int index)</code> / <code>String getString(String name)</code> 获得字符串</li>
</ul>
<ul>
<li><code>int getInt(int index)</code> / <code>int getInt(String name)</code> 获得整形</li>
<li><code>double getDouble(int index)</code> / <code>double getDouble(String name)</code>获得双精度浮点型</li>
</ul>
<h3 id="1-4-5-API详解：释放资源"><a href="#1-4-5-API详解：释放资源" class="headerlink" title="1.4.5 API详解：释放资源"></a>1.4.5 API详解：释放资源</h3><p>与IO流一样，使用后的东西都需要关闭！关闭的顺序是先得到的后关闭，后得到的先关闭。</p>
<pre class=" language-java"><code class="language-java">rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stmt<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
con<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="1-5-JDBC工具类"><a href="#1-5-JDBC工具类" class="headerlink" title="1.5 JDBC工具类"></a>1.5 JDBC工具类</h2><p>“获得数据库连接”操作，将在以后的增删改查所有功能中都存在，可以封装工具类JDBCUtils。提供获取连接对象的方法，从而达到代码的重复利用。</p>
<p>该工具类提供方法：<code>public static Connection getConnection()</code>。代码如下：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> String driver <span class="token operator">=</span> <span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/webdb_4"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> String user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> String password <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//注册驱动</span>
            Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * 获得连接
     * @return
     * @throws SQLException 
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> Connection <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span>  SQLException<span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//获得连接</span>
        Connection conn <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * 释放资源
     * @param conn
     * @param st
     * @param rs
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closeResource</span><span class="token punctuation">(</span>Connection conn <span class="token punctuation">,</span> Statement st <span class="token punctuation">,</span> ResultSet rs<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>rs <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>st <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                st<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>conn <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="1-6-JDBC增删改查操作"><a href="#1-6-JDBC增删改查操作" class="headerlink" title="1.6 JDBC增删改查操作"></a>1.6 JDBC增删改查操作</h2><h3 id="1-6-1-插入"><a href="#1-6-1-插入" class="headerlink" title="1.6.1 插入"></a>1.6.1 插入</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//添加</span>

    Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>
    Statement st <span class="token operator">=</span> null<span class="token punctuation">;</span>
    ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//1 获得连接</span>
        conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//操作</span>
        <span class="token comment" spellcheck="true">//1) 获得语句执行者</span>
        st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//2) 执行sql语句</span>
        <span class="token keyword">int</span> r <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">"insert into category(cname) values('测试')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//3) 处理结果</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//释放资源</span>
        JdbcUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> st<span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span></code></pre>
<h3 id="1-6-2-通过id查询详情"><a href="#1-6-2-通过id查询详情" class="headerlink" title="1.6.2 通过id查询详情"></a>1.6.2 通过id查询详情</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//通过id查询详情</span>
    Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>
    Statement st <span class="token operator">=</span> null<span class="token punctuation">;</span>
    ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        conn <span class="token operator">=</span> JdbcUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//操作</span>
        st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"select * from category where cid = 30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            String cid <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"cid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String cname <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"cname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cid <span class="token operator">+</span> <span class="token string">" @ "</span> <span class="token operator">+</span> cname <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"没有数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span><span class="token punctuation">{</span>
        JdbcUtils<span class="token punctuation">.</span><span class="token function">closeResource</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> st<span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
      <a href="/2020/03/17/day28-jdbc-yu-chu-li-dui-xiang-lian-jie-chi-dbutils/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption"></strong>
        <div class="article-nav-title">
          
            day28-jdbc预处理对象-连接池-DBUtils
          
        </div>
      </a>
    
  </div>
  <div class="article-nav-block">
    
      <a href="/2020/03/10/day26-mysql-cha-xun-dql-duo-biao-guan-xi/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">day26-mysql查询DQL-多表关系</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    <link rel="stylesheet" href="/css/gitment.css"> 
<script src="/js/gitment.js"></script>

<div id="gitmentContainer"></div>

<script>
var gitment = new Gitment({
  owner: '',
  repo: '',
  oauth: {
    client_id: '',
    client_secret: '',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        清风伴酒
      
    </h3>
    <p class="avatar-slogan">
      进击的后端渣渣
    </p>
  </div>
</div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/javaSE/">javaSE</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">编程语言</a>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/12/day47-maven/">day46_maven</a>
          </li>
        
          <li>
            <a href="/2020/04/12/gong-han-mo-shi/">day46_maven</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day46-redis/">day46_redis</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day45-ajax-json/">day45-AJAX-Json</a>
          </li>
        
          <li>
            <a href="/2020/04/12/day44jquery-gao-ji/">day44jQuery高级</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
        <a style="display: block;" href="https://yiluyanxia.github.io/" title target='_blank'
        >一路眼瞎</a>
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2020 fantasy &nbsp;&nbsp;
    驱动于 <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity" target="_blank" rel="noopener">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>